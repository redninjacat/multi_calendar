# Tasks Document

- [x] 1. Add new types, enums, details classes, and controller firstDayOfWeek
  - Modify: `lib/src/controllers/mcal_event_controller.dart`
  - Modify: `lib/src/widgets/mcal_callback_details.dart`
  - Modify: `lib/src/widgets/mcal_day_view_contexts.dart`
  - Add `firstDayOfWeek: int?` parameter and `resolvedFirstDayOfWeek` getter to `MCalEventController`
  - Add `MCalTimeSlotInteractivityDetails` class to `mcal_callback_details.dart`
  - Add `MCalTimeLabelPosition` enum (8 values) to `mcal_day_view_contexts.dart`
  - Purpose: Establish all new shared types before modifying widgets
  - _Leverage: `MCalCellInteractivityDetails` pattern for new details class, `DateLabelPosition` pattern for new enum_
  - _Requirements: REQ-7, REQ-13, REQ-14_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in data modeling and type systems | Task: (1) In `mcal_event_controller.dart`, add `firstDayOfWeek` parameter to the constructor (`int?`, nullable, 0=Sunday..6=Saturday). Add a getter `int get resolvedFirstDayOfWeek => firstDayOfWeek ?? DateTime.monday;`. The controller does NOT use this for recurrence expansion (that's per-rule `weekStart`); it's for visual layout only. (2) In `mcal_callback_details.dart`, add `MCalTimeSlotInteractivityDetails` with fields: `date` (DateTime), `hour` (int), `minute` (int), `startTime` (DateTime), `endTime` (DateTime) — matching the pattern of `MCalCellInteractivityDetails`. (3) In `mcal_day_view_contexts.dart`, add `MCalTimeLabelPosition` enum with 8 values: `topLeadingAbove`, `topLeadingCentered`, `topLeadingBelow`, `topTrailingAbove`, `topTrailingCentered`, `topTrailingBelow`, `bottomLeadingAbove`, `bottomTrailingAbove`. Add dartdoc explaining: "Leading"=left in LTR/right in RTL, "Trailing"=right in LTR/left in RTL, "Top"=hour start gridline, "Bottom"=hour end gridline, "Above"=label bottom at gridline, "Centered"=label center at gridline, "Below"=label top at gridline. | Restrictions: Do NOT modify any widget files yet. Do NOT change existing class constructors in breaking ways — only add new optional parameters. Keep each class under 50 lines. | _Leverage: `MCalCellInteractivityDetails`, `DateLabelPosition` enum from `mcal_month_week_layout_contexts.dart` | _Requirements: REQ-7, REQ-13, REQ-14 | Success: All 3 files compile. New controller parameter is optional and backward-compatible. New details class has all required fields. Enum has all 8 values with dartdoc. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 2. Day View API renames, navigation cleanup, and BuildContext for existing handlers
  - Modify: `lib/src/widgets/mcal_day_view.dart`
  - Rename `showWeekNumber` → `showWeekNumbers`
  - Rename `showDropTargetPreview` → `showDropTargetTiles`
  - Rename `onEmptySpaceDoubleTap` → `onTimeSlotDoubleTap` (also upgrade signature)
  - Remove `onNavigatePrevious`, `onNavigateNext`, `onNavigateToday` parameters
  - Add `BuildContext` as first parameter to ALL existing tap/long-press/double-tap handlers that lack it
  - Purpose: Establish consistent naming, navigation, and callback signatures before adding new features
  - _Leverage: Month View naming conventions, Month View's `void Function(BuildContext, DetailsType)?` pattern_
  - _Requirements: REQ-5, REQ-10, REQ-12_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in API design | Task: In `mcal_day_view.dart`: (1) Rename parameter `showWeekNumber` to `showWeekNumbers` — update the field declaration, constructor parameter, and ALL internal references (search for `showWeekNumber` and replace with `showWeekNumbers`, ~10-15 occurrences in _DayHeader, build methods, semantic labels). (2) Rename `showDropTargetPreview` to `showDropTargetTiles` — update field, constructor, and the `buildFeedbackLayer` call (~line 3325 where `enabled: widget.showDropTargetPreview`). (3) Rename `onEmptySpaceDoubleTap` to `onTimeSlotDoubleTap` — update field declaration (~line 860), constructor (~line 244), and the handler `_handleTimeSlotDoubleTap` where it checks `widget.onEmptySpaceDoubleTap` (~line 3496). Also upgrade the callback signature from `void Function(DateTime)?` to `void Function(BuildContext, MCalTimeSlotContext)?` to match the updated `onTimeSlotTap` and `onTimeSlotLongPress`. Update `_handleTimeSlotDoubleTap` to build a full `MCalTimeSlotContext` (with displayDate, hour, minute, offset, isAllDayArea) instead of just passing a DateTime, and pass `context` as first argument. (4) Remove `onNavigatePrevious`, `onNavigateNext`, `onNavigateToday` — delete the 3 field declarations (~lines 815-825), remove from constructor (~lines 237-239). Update `_handleNavigatePrevious` to always auto-navigate: remove the `if (widget.onNavigatePrevious != null)` branch, keep only the default navigation logic. Same for `_handleNavigateNext` and `_handleNavigateToday`. These methods are still used by keyboard nav and drag edge navigation so must remain as internal methods. `onDisplayDateChanged` already fires via `_onControllerChanged` when controller.setDisplayDate is called. (5) Add `BuildContext` as the FIRST parameter to all existing Day View tap/long-press handlers that currently lack it. These handlers currently do NOT include BuildContext and must be updated: `onDayHeaderTap: void Function(DateTime)?` → `void Function(BuildContext, DateTime)?`, `onDayHeaderLongPress: void Function(DateTime)?` → `void Function(BuildContext, DateTime)?`, `onTimeLabelTap: void Function(MCalTimeLabelContext)?` → `void Function(BuildContext, MCalTimeLabelContext)?`, `onTimeSlotTap: void Function(MCalTimeSlotContext)?` → `void Function(BuildContext, MCalTimeSlotContext)?`, `onTimeSlotLongPress: void Function(MCalTimeSlotContext)?` → `void Function(BuildContext, MCalTimeSlotContext)?`, `onOverflowTap: void Function(List<MCalCalendarEvent>, DateTime)?` → `void Function(BuildContext, List<MCalCalendarEvent>, DateTime)?`, `onOverflowLongPress: void Function(List<MCalCalendarEvent>, DateTime)?` → `void Function(BuildContext, List<MCalCalendarEvent>, DateTime)?`. For each, update: (a) the field declaration, (b) ALL call sites to pass `context` as first arg. Note: `onEventTap` and `onEventLongPress` already have BuildContext — do NOT change those. | Restrictions: Do NOT add any new features or new handlers. Only rename, remove, and add BuildContext to existing handlers. The example app will break — that's expected and fixed in tasks 15-16. Ensure all internal references are updated. | _Leverage: Month View's `void Function(BuildContext, DetailsType)?` pattern, `onDisplayDateChanged` pattern | _Requirements: REQ-5, REQ-10, REQ-12 | Success: File compiles. No references to old parameter names remain. ALL tap/long-press/double-tap handlers include BuildContext as first parameter. Navigation methods always auto-navigate. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 3. Month View API changes — dateFormat type and firstDayOfWeek removal
  - Modify: `lib/src/widgets/mcal_month_view.dart`
  - Change `dateFormat` type from `String?` to `DateFormat?` (from intl package)
  - Remove `firstDayOfWeek` parameter from constructor — read from `widget.controller.firstDayOfWeek` instead
  - Purpose: Align Month View's dateFormat type with Day View and move firstDayOfWeek to controller
  - _Leverage: Day View's `dateFormat: DateFormat?` pattern, controller's new `firstDayOfWeek` from task 1_
  - _Requirements: REQ-10, REQ-13_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in API alignment | Task: In `mcal_month_view.dart`: (1) Change `final String? dateFormat;` to `final DateFormat? dateFormat;`. Add `import 'package:intl/intl.dart';` if not already imported. Find all usage sites where `widget.dateFormat` is used — currently it's passed as a string to `DateFormat(widget.dateFormat)`. Change these to use `widget.dateFormat` directly (it's already a DateFormat object now). If `widget.dateFormat` is null, keep the existing default formatting logic. (2) Remove `final int? firstDayOfWeek;` field and constructor parameter. Find all references to `widget.firstDayOfWeek` (search the file). Replace with `widget.controller.firstDayOfWeek` or `widget.controller.resolvedFirstDayOfWeek` as appropriate. Key locations: weekday header generation, calendar grid first day calculation, page index to month mapping. The controller now owns this value. | Restrictions: Do NOT change any other parameters. Do NOT add new features. The example app will break — that's expected. Ensure all `widget.firstDayOfWeek` references are replaced. | _Leverage: Day View's `dateFormat: DateFormat?`, controller's `firstDayOfWeek` from task 1 | _Requirements: REQ-10, REQ-13 | Success: File compiles. `dateFormat` is `DateFormat?`. No references to `widget.firstDayOfWeek` remain. Calendar reads firstDayOfWeek from controller. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 4. Day View drag callback return type change
  - Modify: `lib/src/widgets/mcal_day_view.dart`
  - Change `onEventDropped` from `void Function(MCalEventDroppedDetails)?` to `bool Function(BuildContext, MCalEventDroppedDetails)?`
  - Change `onEventResized` from `void Function(MCalEventResizedDetails)?` to `bool Function(BuildContext, MCalEventResizedDetails)?`
  - Implement revert logic matching Month View's pattern
  - Purpose: Allow Day View to confirm or revert drag-and-drop and resize operations
  - _Leverage: Month View's revert pattern (lines 2446-2471 for non-recurring, lines 4382-4401 for recurring)_
  - _Requirements: REQ-2_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in drag-and-drop systems | Task: In `mcal_day_view.dart`: (1) Change `onEventDropped` declaration from `final void Function(MCalEventDroppedDetails details)? onEventDropped;` to `final bool Function(BuildContext, MCalEventDroppedDetails)? onEventDropped;`. (2) Change `onEventResized` from `final void Function(MCalEventResizedDetails details)? onEventResized;` to `final bool Function(BuildContext, MCalEventResizedDetails)? onEventResized;`. (3) Update ALL call sites. For `onEventDropped` (~line 2928): Follow Month View's pattern — for non-recurring events: update controller first with new event, call callback, if returns false revert with `controller.addEvents([originalEvent])`. For recurring events: call callback first, only add exception if returns true. If callback is null, accept by default. (4) Apply same pattern for `onEventResized` — find the resize completion handler and apply the same revert logic. Pass `context` as first argument to both callbacks. | Restrictions: Do NOT change the `MCalEventDroppedDetails` or `MCalEventResizedDetails` classes. Match Month View's exact revert pattern. Ensure both non-recurring and recurring event paths are handled. | _Leverage: Month View `onEventDropped` revert pattern (lines 2446-2471, 4382-4401), Month View `onEventResized` revert pattern | _Requirements: REQ-2 | Success: Both callbacks now return bool. Returning false reverts the change. Returning true or null callback accepts. Both non-recurring and recurring paths handled. File compiles. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 5. Hover callback BuildContext update and new hover handlers — both views
  - Modify: `lib/src/widgets/mcal_day_view.dart`
  - Modify: `lib/src/widgets/mcal_month_view.dart`
  - Change all existing hover callback signatures to include `BuildContext`
  - Add new hover callbacks: `onHoverDayHeader`, `onHoverTimeLabel`, `onHoverOverflow` (Day View), `onHoverDateLabel`, `onHoverOverflow` (Month View)
  - Wire all hover callbacks with MouseRegion widgets
  - Purpose: Consistent hover API with BuildContext across both views
  - _Leverage: Month View's existing MouseRegion hover pattern (lines 6373-6392, 7090-7110)_
  - _Requirements: REQ-3, REQ-4, REQ-5_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in pointer events and hover systems | Task: (A) MONTH VIEW (`mcal_month_view.dart`): (1) Change `onHoverCell` from `ValueChanged<MCalDayCellContext?>?` to `void Function(BuildContext, MCalDayCellContext?)?`. Update MouseRegion onEnter to pass `context` as first arg: `widget.onHoverCell!(context, contextObj)`. Same for onExit: `widget.onHoverCell!(context, null)`. (2) Change `onHoverEvent` from `ValueChanged<MCalEventTileContext?>?` to `void Function(BuildContext, MCalEventTileContext?)?`. Update MouseRegion similarly. (3) Add `onHoverDateLabel: void Function(BuildContext, MCalDateLabelContext?)?` — add MouseRegion to date label widget, create MCalDateLabelContext on enter, pass null on exit. (4) Add `onHoverOverflow: void Function(BuildContext, MCalOverflowTapDetails?)?` — add MouseRegion to overflow indicator widget, create MCalOverflowTapDetails on enter, pass null on exit. (B) DAY VIEW (`mcal_day_view.dart`): (1) Change `onHoverEvent` from `void Function(MCalCalendarEvent)?` to `void Function(BuildContext, MCalCalendarEvent?)?` (add BuildContext, make details nullable for exit). Wire with MouseRegion on event tiles. (2) Change `onHoverTimeSlot` from `void Function(MCalTimeSlotContext)?` to `void Function(BuildContext, MCalTimeSlotContext?)?`. Wire with MouseRegion on time slots. NOTE: Day View hover callbacks are currently declared but may not have MouseRegion wiring — add MouseRegion wiring if missing. (3) Add `onHoverDayHeader: void Function(BuildContext, MCalDayHeaderContext?)?` — add MouseRegion to _DayHeader widget. (4) Add `onHoverTimeLabel: void Function(BuildContext, MCalTimeLabelContext?)?` — add MouseRegion to time label widgets. (5) Add `onHoverOverflow: void Function(BuildContext, MCalOverflowTapDetails?)?` — add MouseRegion to overflow indicator. Note: `onHoverTimeSlot` already exists and will be updated to include BuildContext (step 2 above) — no separate "onHoverEmptySpace" is needed since "time slot" and "empty space" are the same area. For all: only wrap in MouseRegion when callback is non-null (performance). | Restrictions: Do NOT add double-tap or long-press handlers (task 6). Only hover. Follow the existing MouseRegion pattern exactly. | _Leverage: Month View MouseRegion pattern (lines 6373-6392) | _Requirements: REQ-3, REQ-4, REQ-5 | Success: All hover callbacks include BuildContext. All new hover handlers fire correctly on enter/exit. MouseRegion only added when callback is non-null. Both files compile. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 6. New double-tap and long-press handlers — both views
  - Modify: `lib/src/widgets/mcal_day_view.dart`
  - Modify: `lib/src/widgets/mcal_month_view.dart`
  - Add missing double-tap and long-press callbacks to complete handler coverage
  - Purpose: Every interactive sub-element has tap, long-press, double-tap, and hover
  - _Leverage: Existing GestureDetector patterns in both views_
  - _Requirements: REQ-3, REQ-4_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in gesture handling | Task: (A) DAY VIEW (`mcal_day_view.dart`): Add these new callback parameters and wire them into existing GestureDetector widgets: (1) `onDayHeaderDoubleTap: void Function(BuildContext, MCalDayHeaderContext)?` — add `onDoubleTap` to _DayHeader's GestureDetector. (2) `onTimeLabelLongPress: void Function(BuildContext, MCalTimeLabelContext)?` — add `onLongPress` to time label GestureDetector (currently only has onTap). (3) `onTimeLabelDoubleTap: void Function(BuildContext, MCalTimeLabelContext)?` — add `onDoubleTap` to time label GestureDetector. (4) `onEventDoubleTap: void Function(BuildContext, MCalEventTapDetails)?` — add `onDoubleTap` to timed event tile GestureDetector and all-day event tile GestureDetector. Use MCalEventTapDetails matching Month View's pattern with tap position if available. (5) `onOverflowDoubleTap: void Function(BuildContext, MCalOverflowTapDetails)?` — add `onDoubleTap` to overflow indicator GestureDetector. Note: `onTimeSlotDoubleTap` was already renamed from `onEmptySpaceDoubleTap` in task 2 — no additional work needed for time slot double tap. (B) MONTH VIEW (`mcal_month_view.dart`): Add: (1) `onDateLabelDoubleTap: void Function(BuildContext, MCalDateLabelTapDetails)?` — add `onDoubleTap` to date label GestureDetector. (2) `onOverflowDoubleTap: void Function(BuildContext, MCalOverflowTapDetails)?` — add `onDoubleTap` to overflow indicator GestureDetector. For all: follow existing GestureDetector patterns — add `onDoubleTapDown` to capture position if the details class includes position, then `onDoubleTap` to fire the callback. Only add gesture callbacks when the parameter is non-null. | Restrictions: Do NOT modify hover handlers (task 5). Do NOT change existing tap/long-press handlers. Only ADD new handlers. | _Leverage: Existing GestureDetector tap/long-press patterns in both views, MCalEventDoubleTapDetails class | _Requirements: REQ-3, REQ-4 | Success: All new handlers fire correctly when gestures occur. Existing handlers unaffected. Both files compile. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 7. Month View keyboard CRUD
  - Modify: `lib/src/widgets/mcal_month_view.dart`
  - Add Intent classes: `MCalMonthViewCreateEventIntent`, `MCalMonthViewDeleteEventIntent`, `MCalMonthViewEditEventIntent`
  - Add parameters: `keyboardShortcuts`, `onCreateEventRequested`, `onDeleteEventRequested`, `onEditEventRequested`
  - Add Shortcuts/Actions widget wrapper
  - Purpose: Add keyboard CRUD to Month View matching Day View's architecture
  - _Leverage: Day View's Intent classes, `_buildShortcutsMap()`, `_buildActionsMap()`, Shortcuts/Actions wrapper_
  - _Requirements: REQ-1_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in keyboard accessibility and shortcuts | Task: In `mcal_month_view.dart`: (1) Add 3 Intent classes at top of file (before MCalMonthView class), matching Day View pattern: `MCalMonthViewCreateEventIntent extends Intent`, `MCalMonthViewDeleteEventIntent extends Intent`, `MCalMonthViewEditEventIntent extends Intent`. Add dartdoc matching Day View style. (2) Add 4 new constructor parameters: `keyboardShortcuts: Map<ShortcutActivator, Intent>?`, `onCreateEventRequested: VoidCallback?`, `onDeleteEventRequested: void Function(MCalCalendarEvent event)?`, `onEditEventRequested: void Function(MCalCalendarEvent event)?`. (3) Add `_buildShortcutsMap()` method returning default shortcuts merged with `widget.keyboardShortcuts`. Defaults: Cmd/Ctrl+N → Create, Cmd/Ctrl+D / Delete / Backspace → Delete, Cmd/Ctrl+E → Edit. Use `SingleActivator` for both Meta and Control variants. (4) Add `_buildActionsMap()` method mapping each Intent to a `CallbackAction` that calls the corresponding callback. For delete/edit, get the focused event from `_keyboardSelectedEventIndex` and the events list for the focused cell — only fire if an event is focused. (5) In the build method, wrap the content with `Shortcuts(shortcuts: _buildShortcutsMap(), child: Actions(actions: _buildActionsMap(), child: existingContent))`. Place this INSIDE the Focus widget but wrapping the content. | Restrictions: Do NOT modify existing keyboard navigation (arrows, Tab, Enter, etc.) — those continue to use Focus+onKeyEvent. Only add the Shortcuts/Actions layer for CRUD. Do NOT change any existing keyboard behavior. | _Leverage: Day View Intent classes (lines 31-72), `_buildShortcutsMap()` (lines 3565-3605), `_buildActionsMap()` (lines 3606-3647), Shortcuts/Actions wrapper (lines 3807-3810) | _Requirements: REQ-1 | Success: Cmd/Ctrl+N fires onCreateEventRequested. Cmd/Ctrl+D, Delete, Backspace fire onDeleteEventRequested with focused event. Cmd/Ctrl+E fires onEditEventRequested with focused event. Custom keyboardShortcuts override defaults. File compiles. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 8. Day View swipe navigation
  - Modify: `lib/src/widgets/mcal_day_view.dart`
  - Add `enableSwipeNavigation`, `swipeNavigationDirection`, `onSwipeNavigation` parameters
  - Implement PageView.builder wrapping for swipe support
  - Purpose: Add touch-friendly swipe navigation to Day View matching Month View
  - _Leverage: Month View's PageView.builder implementation (lines 1475-1495), `_onPageChanged` (lines 1083-1135)_
  - _Requirements: REQ-6_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in gesture navigation and PageView | Task: In `mcal_day_view.dart`: (1) Add 3 parameters: `enableSwipeNavigation: bool` (default false), `swipeNavigationDirection: MCalSwipeNavigationDirection?` (reuse existing enum from month view), `onSwipeNavigation: void Function(BuildContext, MCalSwipeNavigationDetails)?` (reuse existing details class). (2) Add a `PageController _swipePageController` initialized in initState with a large initial page (e.g., 10000) to allow infinite scrolling in both directions. Dispose in dispose. (3) Add helper `DateTime _pageIndexToDay(int pageIndex)` that converts page index to a date relative to the initial date. (4) Add `_onSwipePageChanged(int pageIndex)` that: computes the new day from page index, calls `widget.controller.setDisplayDate(newDay)` (which triggers `onDisplayDateChanged` via the existing listener), and fires `widget.onSwipeNavigation` with direction details. (5) In the build method, when `enableSwipeNavigation` is true, wrap the day content in a `PageView.builder` with: `controller: _swipePageController`, `scrollDirection` based on `swipeNavigationDirection` (horizontal default), `reverse: isRTL && horizontal`, `onPageChanged: _onSwipePageChanged`, `itemBuilder` that builds the day content for the page's date. (6) When `enableSwipeNavigation` is false (default), keep existing behavior unchanged. (7) Handle interaction between horizontal swipe PageView and the vertical time-grid scroll — they use different axes so no conflict for horizontal swipe. For vertical swipe direction, use `NotificationListener<OverscrollNotification>` to let PageView handle page changes at scroll boundaries. | Restrictions: Do NOT break existing scrolling behavior when swipe is disabled. Do NOT modify Month View. Ensure drag-and-drop still works when swipe is enabled (PageView should not intercept drag gestures). | _Leverage: Month View PageView.builder (lines 1475-1495), `MCalSwipeNavigationDirection` enum, `MCalSwipeNavigationDetails` class | _Requirements: REQ-6 | Success: Horizontal swipe navigates between days. Vertical scroll still works for time grid. RTL reverses swipe direction. `onSwipeNavigation` and `onDisplayDateChanged` both fire. Disabled by default. File compiles. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 9. Day View timeSlotInteractivityCallback
  - Modify: `lib/src/widgets/mcal_day_view.dart`
  - Add `timeSlotInteractivityCallback` parameter
  - Wire interactivity checks into tap, long-press, and double-tap handlers
  - Add visual feedback (opacity reduction) for non-interactive slots
  - Purpose: Allow developers to disable specific time slots matching Month View's cellInteractivityCallback
  - _Leverage: Month View's `cellInteractivityCallback` check pattern (lines 6191-6202), opacity pattern_
  - _Requirements: REQ-7_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in interactive calendar UX | Task: In `mcal_day_view.dart`: (1) Add parameter `timeSlotInteractivityCallback: bool Function(BuildContext, MCalTimeSlotInteractivityDetails)?`. (2) In the time slot tap handler (`_handleTimeSlotTap` ~line 3469), BEFORE processing the tap, check interactivity: compute `MCalTimeSlotInteractivityDetails` from the tapped position (date, hour, minute, startTime, endTime based on timeSlotDuration), call the callback, and return early if it returns false. (3) Apply same check in `_handleTimeSlotLongPress`. (4) Apply same check in `_handleTimeSlotDoubleTap` (renamed from _handleTimeSlotDoubleTap in task 2). (5) For visual feedback: in the time grid rendering, when painting time slots, if the callback exists and returns false for a slot, render it with 0.5 opacity (matching Month View's pattern). This may require checking interactivity during the time grid build and applying `Opacity` widget or painting with reduced alpha. (6) Document that `timeSlotInteractivityCallback` does NOT block drag-and-drop — use `onDragWillAccept` for that (matching Month View's documented behavior). | Restrictions: Do NOT block drag operations. Only block tap/long-press/double-tap. Match Month View's documented behavior for `cellInteractivityCallback`. | _Leverage: Month View `cellInteractivityCallback` (lines 6191-6202, 6332-6365), `MCalTimeSlotInteractivityDetails` from task 1 | _Requirements: REQ-7 | Success: Callback can disable specific time slots. Disabled slots have reduced opacity. Tap/long-press/double-tap don't fire on disabled slots. Drag still works. File compiles. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 10. Day View builder-with-default pattern
  - Modify: `lib/src/widgets/mcal_day_view.dart`
  - Refactor ALL builder callbacks to include default widget parameter
  - Extract default widget construction into private methods
  - Purpose: Align Day View builders with Month View's builder-with-default pattern
  - _Leverage: Month View's builder pattern (dayCellBuilder lines 6218-6318, eventTileBuilder lines 7048-7064)_
  - _Requirements: REQ-8_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in builder pattern refactoring | Task: In `mcal_day_view.dart`, refactor ALL builder callbacks to add a default Widget parameter. For EACH builder: (1) Change the typedef to add `Widget defaultWidget` as the last parameter. (2) Extract the current "default widget" code (the else branch when builder is null) into a private method `_buildDefault[Name]()`. (3) At the call site, always build the default first, then pass it to the builder if non-null: `final defaultWidget = _buildDefault[Name](...); final widget = builder != null ? builder(context, contextData, defaultWidget) : defaultWidget;`. Builders to refactor (15 total): `dayHeaderBuilder` → `Widget Function(BuildContext, MCalDayHeaderContext, Widget)?`, `timeLabelBuilder` → `Widget Function(BuildContext, MCalTimeLabelContext, Widget)?`, `gridlineBuilder` → `Widget Function(BuildContext, MCalGridlineContext, Widget)?`, `allDayEventTileBuilder` → `Widget Function(BuildContext, MCalCalendarEvent, MCalAllDayEventTileContext, Widget)?`, `timedEventTileBuilder` → `Widget Function(BuildContext, MCalCalendarEvent, MCalTimedEventTileContext, Widget)?`, `currentTimeIndicatorBuilder` → `Widget Function(BuildContext, MCalCurrentTimeContext, Widget)?`, `navigatorBuilder` → `Widget Function(BuildContext, DateTime, Widget)?`, `dayLayoutBuilder` → `Widget Function(BuildContext, MCalDayLayoutContext, Widget)?`, `draggedTileBuilder` → `Widget Function(BuildContext, MCalCalendarEvent, MCalDraggedTileDetails, Widget)?`, `dragSourceTileBuilder` → `Widget Function(BuildContext, MCalCalendarEvent, MCalDragSourceDetails, Widget)?`, `dropTargetTileBuilder` → `Widget Function(BuildContext, MCalCalendarEvent, MCalTimedEventTileContext, Widget)?`, `dropTargetOverlayBuilder` → `Widget Function(BuildContext, MCalDayViewDropOverlayDetails, Widget)?`, `timeResizeHandleBuilder` → `Widget Function(BuildContext, MCalCalendarEvent, MCalResizeEdge, Widget)?`, `loadingBuilder` → `Widget Function(BuildContext, Widget)?`, `errorBuilder` → `Widget Function(BuildContext, Object, Widget)?`, `timeRegionBuilder` → `Widget Function(BuildContext, MCalTimeRegionContext, Widget)?`. This is a large refactor touching many locations in the file. Be systematic — refactor one builder at a time, test compilation between each. | Restrictions: Do NOT change what the default widgets look like. The visual output with a null builder MUST be identical to before. Do NOT change any builder's context parameters — only ADD the Widget parameter at the end. | _Leverage: Month View builder pattern — build default first, pass to builder | _Requirements: REQ-8 | Success: All 15+ builders have default Widget as last parameter. Null builders produce identical visual output. Builder users can wrap defaults. File compiles. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 11. Day View resizeHandleInset and weekNumberBuilder
  - Modify: `lib/src/widgets/mcal_day_view.dart`
  - Add `resizeHandleInset` parameter matching Month View's pattern
  - Add `weekNumberBuilder` parameter for customizing week number display
  - Purpose: Add remaining missing features from Month View
  - _Leverage: Month View `resizeHandleInset` (lines 4671-4704, 5679-5705, 7259-7265), Month View `weekNumberBuilder`_
  - _Requirements: REQ-9, REQ-11_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: In `mcal_day_view.dart`: (1) Add `resizeHandleInset: double Function(MCalTimedEventTileContext, MCalResizeEdge)?` parameter. Apply in the resize handle positioning code — find where `_ResizeHandle` widgets are created and add inset logic matching Month View: `final inset = widget.resizeHandleInset?.call(tileContext, edge) ?? 0.0;` then use `Positioned(left: isLeading ? inset : null, right: isLeading ? null : inset, ...)` for the handle. (2) Add `weekNumberBuilder: Widget Function(BuildContext, MCalWeekNumberContext, Widget)?` parameter. Reuse `MCalWeekNumberContext` from `mcal_month_view_contexts.dart`. In the `_DayHeader` widget where the week number badge is built (`_buildWeekNumber`), build the default badge first, then pass to builder if provided. Create a `MCalWeekNumberContext(weekNumber: weekNumber, date: displayDate)` — check if MCalWeekNumberContext has these fields, adapt as needed. | Restrictions: Match Month View's resize handle inset behavior exactly. Week number builder only applies when `showWeekNumbers` is true. | _Leverage: Month View `resizeHandleInset` pattern, `MCalWeekNumberContext` class | _Requirements: REQ-9, REQ-11 | Success: Resize handle inset shifts handles inward by the returned value. Week number builder can customize the week number display. Both work correctly. File compiles. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 12. Day View theme additions
  - Modify: `lib/src/styles/mcal_day_theme_data.dart`
  - Add `timeLabelPosition: MCalTimeLabelPosition?` property
  - Add `hoverTimeSlotBackgroundColor: Color?` property
  - Add `hoverEventBackgroundColor: Color?` property
  - Purpose: Add theme properties for time label positioning and hover styling
  - _Leverage: Existing theme property patterns in `MCalDayThemeData`_
  - _Requirements: REQ-14, REQ-16_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in theming | Task: In `mcal_day_theme_data.dart`: (1) Add `final MCalTimeLabelPosition? timeLabelPosition;` with dartdoc explaining the 8 positions and that default is `topTrailingBelow`. Import `MCalTimeLabelPosition` from `mcal_day_view_contexts.dart`. (2) Add `final Color? hoverTimeSlotBackgroundColor;` with dartdoc explaining it's the background color when hovering over time slots on hover-capable platforms. (3) Add `final Color? hoverEventBackgroundColor;` with dartdoc explaining it's the background color when hovering over event tiles. (4) Add all 3 to the constructor as optional named parameters. (5) If a `copyWith` method exists, add the 3 new fields. (6) If `==` and `hashCode` are overridden, add the 3 new fields. | Restrictions: Only modify the theme data class. Do NOT implement the rendering logic here — that's in tasks 13 (positioning) and 5 (hover colors via MouseRegion). | _Leverage: Existing pattern of optional nullable theme properties | _Requirements: REQ-14, REQ-16 | Success: All 3 properties added. Constructor compiles. CopyWith/equality updated if applicable. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 13. Day View time label positioning and sub-hour labels implementation
  - Modify: `lib/src/widgets/mcal_day_view.dart`
  - Implement `timeLabelPosition` rendering logic using theme property
  - Add `showSubHourLabels`, `subHourLabelInterval`, `subHourLabelBuilder` parameters
  - Implement sub-hour label rendering
  - Purpose: Add time label position control and sub-hour label display
  - _Leverage: Existing time label rendering in Day View, `MCalTimeLabelPosition` enum from task 1, theme property from task 12_
  - _Requirements: REQ-14, REQ-15_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in custom layout and positioning | Task: In `mcal_day_view.dart`: (A) TIME LABEL POSITIONING: (1) Find the time label rendering code (in the time legend column builder). Currently labels are positioned with a fixed alignment. (2) Read `theme.timeLabelPosition` (from resolved theme). Default to `MCalTimeLabelPosition.topTrailingBelow` if null. (3) Implement positioning logic: For horizontal alignment, use `CrossAxisAlignment.start` for `leading*` values and `CrossAxisAlignment.end` for `trailing*` values — Flutter's Directionality handles RTL automatically. For vertical positioning relative to the gridline: compute the Y position of the reference gridline (`top*` = hour start gridline Y, `bottom*` = hour end gridline Y). Then align: `Above` → position label so its bottom edge aligns with gridline Y (`top: gridlineY - labelHeight`), `Centered` → position so center aligns (`top: gridlineY - labelHeight/2`), `Below` → position so top edge aligns (`top: gridlineY`). Use `Positioned` widgets within the time legend's Stack/Column. (B) SUB-HOUR LABELS: (1) Add parameters: `showSubHourLabels: bool` (default false), `subHourLabelInterval: Duration?`, `subHourLabelBuilder: Widget Function(BuildContext, MCalTimeLabelContext, Widget)?`. (2) When `showSubHourLabels` is true and `subHourLabelInterval` is set, generate additional label entries between each hour. For each sub-hour mark, create a `MCalTimeLabelContext` with the appropriate `hour` and `minute`. (3) Default sub-hour label: smaller text (e.g., 0.8x size of hour label), lighter color (use theme text color with 0.5 opacity). (4) Sub-hour labels follow the same `timeLabelPosition` as hour labels. (5) If `subHourLabelBuilder` is provided, pass the default sub-hour widget to it. | Restrictions: Do NOT change the appearance of hour labels when sub-hour labels are disabled. Default behavior must be identical to current. Time labels must render correctly in RTL. | _Leverage: Existing time label rendering code, `MCalTimeLabelPosition` enum, `MCalTimeLabelContext` | _Requirements: REQ-14, REQ-15 | Success: All 8 time label positions render correctly. Sub-hour labels appear at configured intervals. Default sub-hour style is visually distinct from hour labels. RTL works correctly. File compiles. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 14. Package exports update
  - Modify: `lib/multi_calendar.dart`
  - Export new Intent classes for Month View
  - Export new enum `MCalTimeLabelPosition`
  - Ensure all new public types are accessible to consumers
  - Purpose: Make all new types available to package consumers
  - _Leverage: Existing export patterns in `multi_calendar.dart`_
  - _Requirements: REQ-1, REQ-14_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in package API design | Task: In `lib/multi_calendar.dart`: (1) Update the `export 'src/widgets/mcal_month_view.dart'` to include `show` directives for the new Intent classes: `MCalMonthViewCreateEventIntent`, `MCalMonthViewDeleteEventIntent`, `MCalMonthViewEditEventIntent` (add to `show` list if one exists, or add them alongside `MCalMonthView`). (2) Update the `export 'src/widgets/mcal_day_view_contexts.dart'` show list to include `MCalTimeLabelPosition`, `MCalTimeSlotInteractivityDetails` (if this is in day_view_contexts — check actual location). (3) Update `export 'src/widgets/mcal_callback_details.dart'` — verify `MCalTimeSlotInteractivityDetails` and any new details classes are exported (the file may already be exported without a show filter). (4) Verify `MCalSwipeNavigationDirection` and `MCalSwipeNavigationDetails` are already exported (they should be from month view). (5) Run `flutter analyze` in the project root to verify no export issues. | Restrictions: Do NOT remove any existing exports. Only add new ones. Verify the file compiles. | _Leverage: Existing export patterns in `multi_calendar.dart` | _Requirements: REQ-1, REQ-14 | Success: All new public types are importable via `package:multi_calendar/multi_calendar.dart`. `flutter analyze` passes. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 15. Example app — Day View updates
  - Modify: `example/lib/views/day_view/tabs/day_features_tab.dart`
  - Modify: `example/lib/views/day_view/tabs/day_theme_tab.dart`
  - Modify: `example/lib/views/day_view/tabs/day_styles_tab.dart`
  - Modify: `example/lib/views/day_view/styles/day_classic_style.dart`
  - Modify: `example/lib/views/day_view/styles/day_modern_style.dart`
  - Modify: `example/lib/views/day_view/styles/day_minimal_style.dart`
  - Modify: `example/lib/views/day_view/styles/day_colorful_style.dart`
  - Modify: `example/lib/views/day_view/styles/day_default_style.dart`
  - Update all Day View example files to use new API
  - Purpose: Showcase all new Day View features and fix breakage from API changes
  - _Leverage: Existing example app patterns, new API from tasks 2-13_
  - _Requirements: REQ-17_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in example app development | Task: Update ALL Day View example files for the API changes: (A) `day_features_tab.dart`: (1) Rename `showWeekNumber` → `showWeekNumbers`. (2) Rename `showDropTargetPreview` → `showDropTargetTiles`. (3) Remove `onNavigatePrevious`, `onNavigateNext`, `onNavigateToday` — navigation relies on `onDisplayDateChanged`. (4) Rename `onEmptySpaceDoubleTap` → `onTimeSlotDoubleTap`. (5) Change `onEventDropped`/`onEventResized` to return `true` (accept all changes). Add `BuildContext` first parameter. (6) Wire new handlers with SnackBar messages: `onEventDoubleTap`, `onDayHeaderDoubleTap`, `onTimeLabelLongPress`, `onTimeLabelDoubleTap`, `onOverflowDoubleTap`, `onHoverDayHeader`, `onHoverTimeLabel`, `onHoverOverflow`. (7) Update ALL existing callback signatures to include BuildContext: `onDayHeaderTap`, `onDayHeaderLongPress`, `onTimeLabelTap`, `onTimeSlotTap`, `onTimeSlotLongPress`, `onOverflowTap`, `onOverflowLongPress` now all take BuildContext as first parameter. Also update `onHoverEvent`/`onHoverTimeSlot` signatures to include BuildContext and nullable details. (8) Add controls: `enableSwipeNavigation` toggle, `swipeNavigationDirection` dropdown, `showSubHourLabels` toggle, `subHourLabelInterval` dropdown, `timeSlotInteractivityCallback` toggle with time range selectors. (9) Wire `onSwipeNavigation` with SnackBar. (B) `day_theme_tab.dart`: Add `timeLabelPosition` dropdown (8 options), `hoverTimeSlotBackgroundColor` color picker, `hoverEventBackgroundColor` color picker. (C) ALL style files (`day_default_style.dart`, `day_classic_style.dart`, `day_modern_style.dart`, `day_minimal_style.dart`, `day_colorful_style.dart`): Update `onEventDropped`/`onEventResized` to return `bool` with BuildContext. Rename `showWeekNumber` → `showWeekNumbers`, `showDropTargetPreview` → `showDropTargetTiles`. Remove any `onNavigatePrevious/Next/Today`. Update builder signatures to include default Widget parameter if any custom builders are used. (D) `day_styles_tab.dart`: Update any references to renamed parameters. All text must use `AppLocalizations.of(context)!` — use existing keys where available, note any missing keys for task 17. | Restrictions: Use localized strings for all new UI text. Do NOT hardcode English. Note missing ARB keys for task 17. | _Leverage: Existing example app patterns, `AppLocalizations` keys | _Requirements: REQ-17 | Success: All Day View example files compile. New features are showcased with controls and SnackBar messages. No references to old parameter names. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 16. Example app — Month View and shared updates
  - Modify: `example/lib/views/month_view/tabs/month_features_tab.dart`
  - Modify: `example/lib/views/month_view/tabs/month_accessibility_tab.dart`
  - Modify: `example/lib/views/month_view/tabs/month_theme_tab.dart`
  - Modify: `example/lib/views/month_view/styles/month_classic_style.dart`
  - Modify: `example/lib/views/month_view/styles/month_modern_style.dart`
  - Modify: `example/lib/views/month_view/styles/month_minimal_style.dart`
  - Modify: `example/lib/views/month_view/styles/month_colorful_style.dart`
  - Modify: `example/lib/views/month_view/styles/month_default_style.dart`
  - Modify: `example/lib/screens/main_screen.dart`
  - Modify: `example/lib/main.dart`
  - Update Month View and shared example files for new API
  - Purpose: Showcase Month View keyboard CRUD and fix breakage from API changes
  - _Leverage: Existing example app patterns_
  - _Requirements: REQ-17_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Update Month View and shared example files: (A) `month_features_tab.dart`: (1) Wire new handlers: `onDateLabelDoubleTap`, `onOverflowDoubleTap`, `onHoverDateLabel`, `onHoverOverflow` with SnackBar messages. (2) Update `onHoverCell`/`onHoverEvent` signatures to include BuildContext and nullable parameter. (3) Remove `firstDayOfWeek` from MCalMonthView widget. (4) Wire `onCreateEventRequested`, `onDeleteEventRequested`, `onEditEventRequested` with SnackBar messages. (5) If `dateFormat` was used as a String, change to `DateFormat(...)` object. (B) `month_accessibility_tab.dart`: Add keyboard CRUD shortcuts to the documentation: Cmd/Ctrl+N=Create, Cmd/Ctrl+D/Delete/Backspace=Delete, Cmd/Ctrl+E=Edit. Wire the CRUD callbacks if a live calendar is shown. (C) ALL month style files: Update `onHoverCell`/`onHoverEvent` signatures. Remove `firstDayOfWeek` from widget. Fix `dateFormat` if used. (D) `main_screen.dart` or wherever the controller is created: Set `firstDayOfWeek` on the `MCalEventController` constructor instead of passing to individual views. E.g.: `MCalEventController(firstDayOfWeek: selectedFirstDayOfWeek)`. Move the firstDayOfWeek control to controller setup. (E) `main.dart`: Verify controller creation uses `firstDayOfWeek`. Note any missing ARB keys for task 17. | Restrictions: Use localized strings. Note missing keys. | _Leverage: Existing example patterns | _Requirements: REQ-17 | Success: All Month View example files compile. Keyboard CRUD is showcased. firstDayOfWeek is on controller. No old API references remain. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 17. Localization — new ARB keys
  - Modify: `example/lib/l10n/app_en.arb`
  - Modify: `example/lib/l10n/app_es.arb`
  - Modify: `example/lib/l10n/app_fr.arb`
  - Modify: `example/lib/l10n/app_ar.arb`
  - Modify: `example/lib/l10n/app_he.arb`
  - Add ARB keys for new SnackBar messages, control labels, and accessibility content
  - Run `flutter gen-l10n` in example/
  - Purpose: Complete localization for all new features
  - _Leverage: Existing ARB key naming conventions (snackbar*, setting*, section*, a11y*)_
  - _Requirements: REQ-17_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: i18n Engineer specializing in Flutter localization | Task: Add ALL missing ARB keys identified in tasks 15-16. Expected new keys include: (1) SnackBar messages for new handlers: snackbarEventDoubleTap, snackbarDayHeaderDoubleTap, snackbarTimeLabelLongPress, snackbarTimeLabelDoubleTap, snackbarTimeSlotDoubleTap, snackbarOverflowDoubleTap, snackbarHoverDayHeader, snackbarHoverTimeLabel, snackbarHoverOverflow, snackbarDateLabelDoubleTap, snackbarSwipeNavigation, snackbarKeyboardCreate, snackbarKeyboardDelete, snackbarKeyboardEdit, snackbarHoverDateLabel, snackbarHoverOverflowMonth. (2) Control labels: settingEnableSwipeNavigation, settingSwipeDirection, settingShowSubHourLabels, settingSubHourLabelInterval, settingTimeLabelPosition, settingHoverTimeSlotColor, settingHoverEventColor, settingTimeSlotInteractivity. (3) TimeLabelPosition dropdown options: timeLabelPositionTopLeadingAbove through timeLabelPositionBottomTrailingAbove. (4) Accessibility tab content for Month View keyboard CRUD shortcuts. (5) Any other keys referenced in tasks 15-16. For each key, add to ALL 5 files with proper translations. Use parameterized strings where needed (e.g., event titles, dates). Add `@keyName` metadata with `placeholders` in the English template file. Run `cd example && flutter gen-l10n` after adding all keys. | Restrictions: Must be valid JSON. Translations must be accurate. RTL languages (ar, he) must use proper text. | _Leverage: Existing ARB key naming conventions, tasks 15-16 output | _Requirements: REQ-17 | Success: All ARB files valid JSON. `flutter gen-l10n` succeeds. Every `AppLocalizations.of(context)!` reference has a corresponding key. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 18. Tests — new and updated
  - Modify: `test/utils/localization_test.dart`
  - Modify: `test/widgets/mcal_day_view_test.dart` (or create)
  - Modify: `test/widgets/mcal_month_view_test.dart` (or create)
  - Modify: `test/controllers/mcal_event_controller_test.dart` (or create)
  - Update existing tests for renamed parameters and changed signatures
  - Add tests for new features
  - Purpose: Verify all changes work correctly and no regressions
  - _Leverage: Existing test patterns, flutter_test_
  - _Requirements: All_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Test Engineer | Task: (1) Update existing tests: search all test files for old parameter names (`showWeekNumber`, `showDropTargetPreview`, `onEmptySpaceDoubleTap`, `onNavigatePrevious`, `onNavigateNext`, `onNavigateToday`) and update to new names. Update `onEventDropped`/`onEventResized` test calls to return `bool` with BuildContext. Update ALL Day View callback tests for new signatures — every tap/long-press/double-tap/hover handler now includes BuildContext as first parameter. Update hover callback tests for new signatures. (2) Add controller tests: test `firstDayOfWeek` property — null defaults to Monday, explicit values are preserved, `resolvedFirstDayOfWeek` returns correct value. (3) Add Day View tests: test drag revert (return false → event reverts), builder-with-default (null builder matches default output, builder receives default widget), swipe navigation (page change fires onDisplayDateChanged), timeSlotInteractivityCallback (returns false → tap doesn't fire), onEventDoubleTap fires on double-tap. (4) Add Month View tests: keyboard CRUD (Cmd+N fires onCreateEventRequested, Cmd+D fires onDeleteEventRequested with focused event, Cmd+E fires onEditEventRequested), custom keyboardShortcuts override, onDateLabelDoubleTap fires, onHoverDateLabel receives BuildContext. (5) Test renamed parameters compile and work. (6) Test Month View dateFormat as DateFormat object. (7) Test time label positioning for at least 3 positions (topTrailingBelow default, topLeadingCentered, bottomLeadingAbove). | Restrictions: Follow existing test patterns. Use flutter_test widgets. Tests must be independent. | _Leverage: Existing test files, flutter_test | _Requirements: All | Success: All tests pass. No old parameter name references in tests. New features have test coverage. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._

- [x] 19. Build verification and final fixes
  - Run `flutter gen-l10n` at project root and in example/
  - Run `flutter analyze` at project root and in example/
  - Run `flutter test` at project root
  - Run `flutter build apk --debug` in example/
  - Fix any compilation errors, analyzer warnings, or test failures
  - Purpose: Ensure everything compiles, analyzes clean, and tests pass
  - _Leverage: All files from tasks 1-18_
  - _Requirements: All (verification)_
  - _Prompt: Implement the task for spec month-day-view-api-alignment, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Senior Flutter Developer specializing in build verification | Task: Run comprehensive verification: (1) `flutter gen-l10n` at project root — verify package ARB regeneration. (2) `cd example && flutter gen-l10n` — verify example ARB regeneration. (3) `flutter analyze` at project root — fix any errors. (4) `cd example && flutter analyze` — fix any errors. (5) `flutter test` at project root — all tests must pass. (6) `cd example && flutter build apk --debug` — verify example app builds. (7) Grep for old parameter names across entire codebase: `showWeekNumber` (not `showWeekNumbers`), `showDropTargetPreview`, `onEmptySpaceDoubleTap`, `onNavigatePrevious`, `onNavigateNext`, `onNavigateToday`, `widget.firstDayOfWeek` in month_view — must find zero results. (8) Verify ALL tap/long-press/double-tap/hover callbacks include BuildContext as first parameter in both views — grep for `void Function(MCalTimeSlotContext` (without BuildContext) and similar patterns to ensure none were missed. (9) Fix any issues found. Document all fixes. | Restrictions: Do not add new features. Only fix issues. | _Leverage: All created/modified files | _Requirements: All | Success: `flutter gen-l10n` succeeds. `flutter analyze` 0 errors. `flutter test` passes. Example app builds. Zero old parameter name references. Mark task as in-progress in tasks.md before starting, log implementation with log-implementation tool after completion, then mark as complete._
