{
  "id": "snapshot_1771053946864_7ltykc83j",
  "approvalId": "approval_1771053807159_up5tgxt92",
  "approvalTitle": "Day View Tasks - 62 tasks across 20 phases",
  "version": 2,
  "timestamp": "2026-02-14T07:25:46.864Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Tasks Document: Day View Implementation\n\n## Phase 1: Foundation - Time Utilities and Context Objects\n\n- [ ] 1. Create time calculation utilities\n  - File: `lib/src/utils/time_utils.dart`\n  - Create `timeToOffset()` - converts DateTime to vertical pixel offset\n  - Create `offsetToTime()` - converts pixel offset to DateTime with time slot snapping\n  - Create `durationToHeight()` - converts Duration to pixel height\n  - Create `snapToTimeSlot()` - snaps DateTime to nearest time slot interval\n  - Create `snapToNearbyTime()` - snaps to nearby time boundaries (for magnetic snapping)\n  - Create `isWithinSnapRange()` - checks if two times are within snap range\n  - All functions must be pure (no side effects) and DST-safe\n  - Purpose: Core time↔pixel conversion for all rendering and interaction\n  - _Leverage: Month View's DST-safe date arithmetic patterns using `DateTime(y, m, d)` constructor_\n  - _Requirements: FR-3 (Time slot granularity), FR-12 (Snap-to-time), FR-14 (Drag and resize)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter/Dart Developer specializing in pure functions and date/time arithmetic | Task: Create `lib/src/utils/time_utils.dart` with time↔pixel conversion utilities following design doc `.spec-workflow/specs/day-view/design.md` Component 2. Implement `timeToOffset`, `offsetToTime`, `durationToHeight`, `snapToTimeSlot`, `snapToNearbyTime`, `isWithinSnapRange`. All must be pure functions using DST-safe arithmetic (DateTime constructor, not Duration.days). Add comprehensive dartdoc with examples. | Restrictions: No side effects. No Duration-based day arithmetic. Handle edge cases (before startHour, after endHour). | Success: `dart analyze` clean, all functions pure and tested, DST-safe arithmetic verified. Mark task as [-] before starting, log with log-implementation tool after completion, mark as [x]._\n\n- [ ] 2. Create Day View context objects\n  - File: `lib/src/widgets/mcal_day_view_contexts.dart`\n  - Create `MCalDayHeaderContext` - day of week, date, weekNumber (optional)\n  - Create `MCalTimeLabelContext` - hour, minute, formatted time string\n  - Create `MCalGridlineContext` - hour, minute, offset, type (hour/major/minor), intervalMinutes\n  - Create `MCalTimedEventTileContext` - event, displayDate, columnIndex, totalColumns, startTime, endTime, isDropTargetPreview, dropValid\n  - Create `MCalAllDayEventTileContext` - event, displayDate, isDropTargetPreview, dropValid\n  - Create `MCalCurrentTimeContext` - currentTime, offset\n  - Create `MCalTimeSlotContext` - displayDate, hour, minute, offset, isAllDayArea\n  - Create `MCalTimeRegionContext` - region, displayDate, startOffset, height, isBlocked, startTime, endTime\n  - Create `MCalDayLayoutContext` - events, displayDate, startHour, endHour, hourHeight, areaWidth\n  - All classes immutable with const constructors and full dartdoc\n  - Purpose: Type-safe context objects for all builder callbacks\n  - _Leverage: Month View's context pattern in `lib/src/widgets/mcal_month_view_contexts.dart`_\n  - _Requirements: All functional requirements (builder patterns)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Dart Developer specializing in immutable data structures | Task: Create `lib/src/widgets/mcal_day_view_contexts.dart` with 9 context classes following design doc section \"Context Objects\". Model after Month View's `MCalDayCellContext`, `MCalEventTileContext` patterns. All classes immutable with const constructors. Add comprehensive dartdoc explaining when each context is provided to builders. | Restrictions: All fields final. Only const constructors. No methods (pure data classes). | Success: `dart analyze` clean, all contexts immutable, follow Month View patterns. Mark task as [-] before starting, log implementation, mark as [x]._\n\n- [ ] 3. Create Day View callback detail classes\n  - File: `lib/src/widgets/mcal_callback_details.dart` (extend existing)\n  - Create `MCalDropOverlayDetails` - highlightedTimeSlots, draggedEvent, proposedStartDate, proposedEndDate, isValid, sourceDate\n  - Create `MCalTimeSlotRange` - startTime, endTime, topOffset, height\n  - Create `MCalDragSourceDetails` - event, sourceDate, sourceTime, isAllDay\n  - Create `MCalDraggedTileDetails` - event, sourceDate, position, isAllDay\n  - Extend `MCalEventDroppedDetails` with `typeConversion` field (nullable String: 'allDayToTimed', 'timedToAllDay', null)\n  - All classes immutable with const constructors and full dartdoc\n  - Purpose: Type-safe detail objects for drag/drop callbacks\n  - _Leverage: Existing callback detail patterns in same file (`MCalEventDroppedDetails`, `MCalEventResizedDetails`)_\n  - _Requirements: FR-14 (Drag and drop), FR-15 (All-day ↔ Timed conversion)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Dart Developer specializing in data modeling | Task: Extend `lib/src/widgets/mcal_callback_details.dart` with Day View detail classes following design doc section \"Callback Detail Extensions\". Model after existing `MCalEventDroppedDetails`. Add `typeConversion` field to `MCalEventDroppedDetails` (nullable String for all-day conversion tracking). Add comprehensive dartdoc. | Restrictions: Do NOT modify existing classes except `MCalEventDroppedDetails`. Append to end of file. All new classes immutable. | Success: `dart analyze` clean, new classes follow existing patterns, typeConversion field added correctly. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 2: Core Widget Structure and Theme\n\n- [ ] 4. Add Day View theme properties to MCalThemeData\n  - File: `lib/src/styles/mcal_theme.dart`\n  - Add day header properties: `dayHeaderDayOfWeekStyle`, `dayHeaderDateStyle`\n  - Add week number properties: `weekNumberBackgroundColor`, `weekNumberTextColor`, `weekNumberTextStyle`\n  - Add time legend properties: `timeLegendWidth`, `timeLegendTextStyle`, `timeLegendBackgroundColor`\n  - Add gridline properties: `hourGridlineColor`, `hourGridlineWidth`, `majorGridlineColor`, `majorGridlineWidth`, `minorGridlineColor`, `minorGridlineWidth`\n  - Add current time indicator properties: `currentTimeIndicatorColor`, `currentTimeIndicatorWidth`, `currentTimeIndicatorDotRadius`\n  - Add timed event properties: `timedEventMinHeight`, `timedEventBorderRadius`, `timedEventPadding`\n  - Add special time region properties: `specialTimeRegionColor`, `blockedTimeRegionColor`, `timeRegionBorderColor`, `timeRegionTextColor`, `timeRegionTextStyle`\n  - Add all-day section: `allDaySectionMaxRows`\n  - Update `copyWith`, `lerp`, and `fromTheme` with sensible defaults from Material 3 theme\n  - Purpose: Comprehensive theme support for Day View\n  - _Leverage: Existing theme pattern in same file, Month View theme properties_\n  - _Requirements: NFR-5 (Theming), all visual customization requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in theming and Material Design | Task: Add Day View theme properties to `MCalThemeData` in `lib/src/styles/mcal_theme.dart` following design doc section \"Theme Property Additions\". Add ~25 new properties for day header, gridlines, time legend, time regions, etc. Update `copyWith`, `lerp`, and `fromTheme` methods. Use Material 3 ColorScheme for defaults. Add full dartdoc for each property. | Restrictions: Do NOT modify existing Month View theme properties. Maintain theme consistency. | Success: `dart analyze` clean, all properties with sensible defaults, copyWith/lerp updated, Material 3 integration. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 5. Create MCalDayView widget scaffold and public API\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `MCalDayView` StatefulWidget with complete public API (~80 parameters):\n    - Core: `controller`, `displayDate`, `startHour`, `endHour`, `timeSlotDuration`, `gridlineInterval`\n    - Navigation: `showNavigator`, `navigatorBuilder`, `onNavigatePrevious`, `onNavigateNext`, `onNavigateToday`\n    - All-day section: `allDaySectionMaxRows`, `allDayToTimedDuration`, `allDayEventTileBuilder`\n    - Drag and drop: `enableDragToMove`, `enableDragToResize`, `dragEdgeNavigationEnabled`, all drag builders and callbacks\n    - Snapping: `snapToTimeSlots`, `snapToOtherEvents`, `snapToCurrentTime`, `snapRange`\n    - Special regions: `specialTimeRegions`, `timeRegionBuilder`\n    - Builders: all 15+ builder callbacks\n    - Callbacks: all tap/long-press/hover callbacks\n    - Appearance: `showWeekNumber`, `showCurrentTimeIndicator`, `theme`, `locale`\n    - Accessibility: `enableKeyboardNavigation`, `autoFocusOnEventTap`, `semanticsLabel`\n  - Create `_MCalDayViewState` class with state fields (from design doc)\n  - Implement `initState`, `dispose`, `didUpdateWidget` lifecycle methods\n  - Add `_resolveTheme`, `_isRTL`, `_resolveDragToResize` helper methods\n  - Build method returns basic Column scaffold (Navigator + Expanded placeholder)\n  - Purpose: Complete public API surface and widget lifecycle\n  - _Leverage: Month View's widget structure in `lib/src/widgets/mcal_month_view.dart` (~lines 1-800)_\n  - _Requirements: All functional requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in widget API design | Task: Create `lib/src/widgets/mcal_day_view.dart` with `MCalDayView` widget and `_MCalDayViewState` following design doc \"Public API\" and \"State Management\" sections. Add all ~80 parameters mirroring Month View structure. Implement lifecycle methods, helper methods. Build method returns basic Column scaffold. Add comprehensive dartdoc for every parameter. | Restrictions: Do NOT implement rendering logic yet (Phases 3-7). Just API surface and lifecycle. No child widgets yet. | Success: `dart analyze` clean, widget compiles, all parameters with dartdoc, lifecycle correct. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 6. Export Day View types from multi_calendar.dart\n  - File: `lib/multi_calendar.dart`\n  - Export `MCalDayView`\n  - Export all Day View context classes (9 classes)\n  - Export all Day View detail classes (5 new classes)\n  - Export `MCalTimeRegion` data model\n  - Purpose: Public API accessibility\n  - _Leverage: Existing export pattern in same file_\n  - _Requirements: All functional requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Dart Developer | Task: Add Day View exports to `lib/multi_calendar.dart`. Export `MCalDayView`, all context classes from `mcal_day_view_contexts.dart`, detail classes from `mcal_callback_details.dart`, and `MCalTimeRegion`. Follow existing export pattern. | Restrictions: Do NOT change existing exports. Maintain alphabetical grouping. | Success: All Day View types importable from `package:multi_calendar/multi_calendar.dart`. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 3: Navigation and Day Header\n\n- [ ] 7. Implement Day Navigator component\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `_DayNavigator` private StatelessWidget\n  - Layout: Row with IconButton (prev), Text/GestureDetector (date label), IconButton (today), IconButton (next)\n  - Wire to callbacks: `onNavigatePrevious`, `onNavigateNext`, `onNavigateToday`\n  - Support custom `navigatorBuilder` callback\n  - Default styling from theme\n  - Semantic labels: \"Previous day\", \"Today\", \"Next day\", \"{formatted date}\"\n  - RTL support for button order\n  - Purpose: Day-to-day navigation controls\n  - _Leverage: Month View's `_NavigatorWidget` pattern (~line 5400)_\n  - _Requirements: FR-1 (Basic day view structure), FR-17 (Cross-day navigation)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in navigation UI | Task: Create `_DayNavigator` widget in `lib/src/widgets/mcal_day_view.dart` following design doc Component 1. Model after Month View's `_NavigatorWidget`. Add prev/today/next buttons with proper RTL support. Support custom builder callback. Add semantic labels. Wire to parent widget callbacks. | Restrictions: Match Month View patterns. RTL-aware button order. | Success: Navigator renders correctly, buttons work, custom builder supported, RTL correct. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 8. Implement Day Header with optional week number\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `_DayHeader` private StatelessWidget\n  - Display day of week (e.g., \"Monday\") and date number (e.g., \"14\")\n  - Optionally display ISO 8601 week number when `showWeekNumber: true`\n  - Implement `_calculateISOWeekNumber(DateTime date)` helper using ISO 8601 algorithm\n  - Position in top-leading corner (RTL-aware)\n  - Support custom `dayHeaderBuilder` callback\n  - Default styling from theme (`dayHeaderDayOfWeekStyle`, `dayHeaderDateStyle`, `weekNumberTextStyle`)\n  - Semantic label: \"Monday, February 14, Week 7\" (when week number shown)\n  - Purpose: Date identification and optional week context\n  - _Leverage: Month View's week number calculation, date formatting with `intl` package_\n  - _Requirements: FR-1 (Basic structure), FR-18 (Week number display)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in date formatting | Task: Create `_DayHeader` widget in `lib/src/widgets/mcal_day_view.dart` following design doc Component 4. Display day of week and date. Implement ISO 8601 week number calculation. Support custom builder. RTL-aware positioning. Use intl package for localization. Add comprehensive semantic label. | Restrictions: Week number must follow ISO 8601 standard. RTL positioning correct. | Success: Header renders correctly, week number accurate, RTL works, custom builder supported. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 4: Time Legend and Gridlines\n\n- [ ] 9. Implement Time Legend Column\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `_TimeLegendColumn` private StatelessWidget\n  - Render hour labels (e.g., \"9 AM\", \"2 PM\") at each hour boundary\n  - Use `intl.DateFormat` for locale-aware time formatting\n  - Vertical positioning matches gridline layer (uses `timeToOffset`)\n  - Support custom `timeLabelBuilder` callback\n  - Support `onTimeLabelTap` callback\n  - Default width from theme (`timeLegendWidth`)\n  - Semantic labels for each hour\n  - Purpose: Time scale reference for events\n  - _Leverage: Time utilities from Task 1, intl package for formatting_\n  - _Requirements: FR-1 (Basic structure), NFR-4 (i18n)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in internationalization | Task: Create `_TimeLegendColumn` widget in `lib/src/widgets/mcal_day_view.dart` following design doc Component 6. Render hour labels using `timeToOffset` for positioning. Use intl.DateFormat for locale-aware formatting. Support custom builder and tap callback. Add semantic labels. | Restrictions: Must use time utilities from Task 1. Locale-aware formatting required. | Success: Time labels render at correct positions, locale formatting works, custom builder supported, tappable. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 10. Implement Gridlines Layer with configurable intervals\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `_GridlinesLayer` private StatelessWidget\n  - Render horizontal lines at configured `gridlineInterval` (1, 5, 10, 15, 20, 30, or 60 minutes)\n  - Classify gridlines: `MCalGridlineType.hour` (on the hour), `MCalGridlineType.major` (30 min), `MCalGridlineType.minor` (other intervals)\n  - Use different colors/widths from theme: `hourGridlineColor/Width`, `majorGridlineColor/Width`, `minorGridlineColor/Width`\n  - Support custom `gridlineBuilder` callback with `MCalGridlineContext`\n  - Use CustomPainter for performance\n  - Purpose: Visual time scale with customizable granularity\n  - _Leverage: Time utilities from Task 1, CustomPainter for efficient rendering_\n  - _Requirements: FR-2 (Configurable gridlines), FR-3 (Time slot granularity)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in CustomPainter | Task: Create `_GridlinesLayer` widget in `lib/src/widgets/mcal_day_view.dart` following design doc Component 7. Render gridlines at configured interval. Classify as hour/major/minor. Use CustomPainter for performance. Support custom builder. Provide full context object. | Restrictions: Must use CustomPainter. Interval must be validated (1/5/10/15/20/30/60 min only). | Success: Gridlines render at correct intervals, different styles per type, custom builder works, performant. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 5: Current Time Indicator\n\n- [ ] 11. Implement Current Time Indicator with live updates\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `_CurrentTimeIndicator` private StatefulWidget with timer\n  - Render horizontal line at current time position (using `timeToOffset`)\n  - Add leading dot (circle) at RTL-aware edge\n  - Timer updates every minute (not continuously)\n  - Support custom `currentTimeIndicatorBuilder` callback\n  - Styling from theme: `currentTimeIndicatorColor`, `currentTimeIndicatorWidth`, `currentTimeIndicatorDotRadius`\n  - Semantic label: \"Current time: {formatted time}\"\n  - Cancel timer in `dispose()`\n  - Purpose: Live current time reference\n  - _Leverage: Time utilities from Task 1, Timer for updates_\n  - _Requirements: FR-1 (Basic structure), FR-8 (Current time indicator)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in real-time UI | Task: Create `_CurrentTimeIndicator` StatefulWidget in `lib/src/widgets/mcal_day_view.dart` following design doc Component 8. Render horizontal line at current time using `timeToOffset`. Add timer that fires every minute. Support custom builder. RTL-aware dot position. Cancel timer in dispose. Add semantic label. | Restrictions: Timer must fire every 60 seconds, not continuously. Must cancel in dispose. | Success: Indicator renders at current time, updates every minute, timer cleaned up, RTL works, custom builder supported. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 6: Special Time Regions\n\n- [ ] 12. Create MCalTimeRegion data model\n  - File: `lib/src/models/mcal_time_region.dart` (new)\n  - Create `MCalTimeRegion` class with fields: `id`, `startTime`, `endTime`, `color`, `text`, `blockInteraction`, `recurrenceRule`, `icon`, `customData`\n  - Implement `contains(DateTime time)` method\n  - Implement `overlaps(DateTime start, DateTime end)` method\n  - Support recurring regions via `recurrenceRule` (daily lunch, weekends, etc.)\n  - Immutable with const constructor\n  - Comprehensive dartdoc with examples\n  - Purpose: Data model for special time regions (non-working hours, blocked slots, etc.)\n  - _Leverage: Existing model patterns, RFC 5545 RRULE support from controller_\n  - _Requirements: FR-13 (Special time regions)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Dart Developer specializing in data modeling | Task: Create `lib/src/models/mcal_time_region.dart` with `MCalTimeRegion` class following design doc \"Data Models\" section. Add all fields, contains/overlaps methods. Support recurrence. Immutable with const constructor. Add comprehensive dartdoc with examples (lunch break, non-working hours, blocked time). | Restrictions: Immutable class. Only pure methods. | Success: `dart analyze` clean, class is immutable, methods work correctly, good dartdoc. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 13. Implement Special Time Regions Layer\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `_TimeRegionsLayer` private StatelessWidget\n  - Filter regions applicable to display date (including recurring region expansion)\n  - Render each region as positioned colored overlay using `timeToOffset` and `durationToHeight`\n  - Support custom `timeRegionBuilder` callback with `MCalTimeRegionContext`\n  - Default styling: region color, border, optional text/icon\n  - Different default colors for `blockInteraction: true` vs false (from theme)\n  - Render below events layer but above gridlines\n  - Purpose: Visual indication of special time periods\n  - _Leverage: Time utilities from Task 1, time region model from Task 12_\n  - _Requirements: FR-13 (Special time regions)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in overlays | Task: Create `_TimeRegionsLayer` widget in `lib/src/widgets/mcal_day_view.dart` following design doc Component 5a. Filter applicable regions for display date. Expand recurring regions. Render as positioned colored overlays. Support custom builder. Use theme colors for blocked vs non-blocked. Position correctly using time utilities. | Restrictions: Must handle recurring regions. Must expand RRULE for display date. Blocked regions use different color. | Success: Regions render at correct positions, recurring regions work, custom builder supported, blocked regions visually distinct. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 7: All-Day Events Section\n\n- [ ] 14. Implement All-Day Events Section\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `_AllDayEventsSection` private StatelessWidget\n  - Layout all-day events in rows (max rows from `allDaySectionMaxRows` theme property)\n  - Wrap events in Wrap widget for flow layout\n  - Each event uses `allDayEventTileBuilder` or default tile\n  - Support drag-to-move when enabled (wrap in `MCalDraggableEventTile`)\n  - Support tap/long-press callbacks\n  - Show overflow indicator if events exceed max rows (similar to Month View)\n  - Semantic labels for each all-day event\n  - Purpose: Display and interact with all-day events\n  - _Leverage: Month View's all-day event rendering patterns, `MCalDraggableEventTile` from Task 15_\n  - _Requirements: FR-1 (Basic structure), FR-14 (Drag and drop), FR-15 (All-day ↔ Timed conversion)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in event rendering | Task: Create `_AllDayEventsSection` widget in `lib/src/widgets/mcal_day_view.dart` following design doc Component 9. Layout all-day events in Wrap with max rows limit. Use custom builder or default tile. Support drag-to-move via `MCalDraggableEventTile`. Support overflow indicator. Add tap/long-press callbacks. Add semantic labels. | Restrictions: Must respect max rows limit. Must show overflow. Drag must integrate with handler. | Success: All-day events render correctly, overflow works, draggable when enabled, callbacks fire, semantic labels present. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 8: Timed Events Rendering (No Interaction Yet)\n\n- [ ] 15. Implement overlap detection algorithm for timed events\n  - File: `lib/src/widgets/mcal_day_view.dart` (or separate utility file)\n  - Create `detectOverlapsAndAssignColumns()` function\n  - Input: List of timed events for the day\n  - Algorithm: Sort by start time, detect overlaps, assign column indices\n  - Output: List of events with columnIndex and totalColumns\n  - Handle nested overlaps (3+ concurrent events)\n  - Pure function, no side effects\n  - Purpose: Layout events side-by-side when they overlap\n  - _Leverage: Interval tree or sweep-line algorithm for O(n log n) performance_\n  - _Requirements: FR-9 (Event overlap layout)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Algorithm Developer specializing in interval problems | Task: Implement `detectOverlapsAndAssignColumns` function in `lib/src/widgets/mcal_day_view.dart` following design doc Component 10. Sort events by start, detect overlaps, assign column indices for side-by-side layout. Handle nested overlaps. O(n log n) or better. Pure function. Add comprehensive dartdoc with examples. | Restrictions: Must be pure function. Must handle all overlap cases. Optimal complexity. | Success: Function works for all overlap patterns (2-way, 3-way, nested), efficient, well-documented. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 16. Implement Timed Events Layer (static rendering)\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `_TimedEventsLayer` private StatelessWidget\n  - Use overlap detection from Task 15 to calculate column layout\n  - Support custom `dayLayoutBuilder` callback for full layout control\n  - Default layout: render events in columns using Stack with Positioned\n  - Each event positioned using `timeToOffset` (top), `durationToHeight` (height), column width calculations\n  - Use `timedEventTileBuilder` or default tile for each event\n  - Apply `timedEventMinHeight` from theme\n  - Semantic labels for each event: \"{title}, {start time} to {end time}, {duration}\"\n  - Purpose: Render timed events at correct vertical positions\n  - _Leverage: Time utilities from Task 1, overlap detection from Task 15, Month View's event tile patterns_\n  - _Requirements: FR-1 (Basic structure), FR-9 (Event overlap layout)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in complex layouts | Task: Create `_TimedEventsLayer` widget in `lib/src/widgets/mcal_day_view.dart` following design doc Component 10. Use overlap detection to calculate columns. Support custom layout builder. Default: Stack with Positioned events. Use time utilities for positioning. Apply min height. Add semantic labels. | Restrictions: Do NOT add drag/resize yet (Phase 9-10). Static rendering only. Must support custom layout builder. | Success: Events render at correct positions, overlaps show side-by-side, custom builder works, semantic labels present. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 9: Drag and Drop - Basic Structure\n\n- [ ] 17. Integrate MCalDragHandler and add drag state to Day View\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Add drag state fields to `_MCalDayViewState`: `_dragHandler`, `_isDragActive`, `_isResizeActive`\n  - Add debouncing state (matching Month View): `_latestDragDetails`, `_dragMoveDebounceTimer`, `_layoutCachedForDrag`\n  - Create `_ensureDragHandler` lazy getter\n  - Implement `_cacheLayoutForDrag()` method\n  - Add `_handleDragStarted()`, `_handleDragEnded()`, `_handleDragCancelled()` callbacks\n  - Wire to controller and widget callbacks\n  - Purpose: Drag state management infrastructure\n  - _Leverage: Month View's drag handler integration pattern (~lines 1450-1550), `MCalDragHandler` from existing codebase_\n  - _Requirements: FR-14 (Drag and drop)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in state management | Task: Add drag state to `_MCalDayViewState` in `lib/src/widgets/mcal_day_view.dart` following design doc \"State Management\" section and Month View pattern. Add drag handler, debouncing fields, lazy getter. Implement drag lifecycle callbacks. Wire to controller. | Restrictions: EXACTLY match Month View's debouncing pattern. Do NOT implement drag gestures yet (Task 19). | Success: Drag state fields present, handler integrates correctly, lifecycle callbacks wired. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 18. Add DragTarget wrapper to timed events area\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Wrap timed events area in `DragTarget<MCalDragData>`\n  - Implement `onMove`, `onLeave`, `onAcceptWithDetails` callbacks (placeholder implementations)\n  - Wire to drag handler methods (to be implemented in next tasks)\n  - Add global key `_timedEventsAreaKey` for layout access\n  - Purpose: Unified drag target for entire day view\n  - _Leverage: Month View's DragTarget pattern (~lines 4958-5036)_\n  - _Requirements: FR-14 (Drag and drop)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in drag and drop | Task: Wrap timed events area with `DragTarget<MCalDragData>` in `lib/src/widgets/mcal_day_view.dart` following Month View pattern. Add `onMove`, `onLeave`, `onAcceptWithDetails` with placeholder implementations. Add global key for layout access. | Restrictions: EXACTLY match Month View's DragTarget structure. Placeholder implementations only (will be filled in Tasks 19-21). | Success: DragTarget wraps timed events area, callbacks present (empty), key added. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 10: Drag and Drop - Debounced Handlers\n\n- [ ] 19. Implement debounced drag handlers (matching Month View pattern)\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Implement `_handleDragMove(DragTargetDetails details)` - stores latest details, starts debounce timer (16ms)\n  - Implement `_processDragMove()` - debounced processor (called max once per 16ms):\n    - Cache layout if not cached\n    - Convert global position to local\n    - Detect section crossing (all-day ↔ timed)\n    - Call appropriate handler (see Task 20)\n    - Check horizontal edge proximity for cross-day navigation\n  - Implement `_handleDragLeave()` - cancels timer, clears details, clears proposed range\n  - Implement `_handleDrop(DragTargetDetails details)` - cancels edge nav, flushes timer, validates, calls user callback, updates controller\n  - Purpose: 60fps drag performance with debounced calculations\n  - _Leverage: Month View's debounced drag pattern EXACTLY (~lines 4084-4362)_\n  - _Requirements: FR-14 (Drag and drop), FR-17 (Cross-day navigation), NFR-2 (Performance)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in performance optimization | Task: Implement debounced drag handlers in `lib/src/widgets/mcal_day_view.dart` EXACTLY matching Month View pattern (lines 4084-4362). Implement `_handleDragMove`, `_processDragMove`, `_handleDragLeave`, `_handleDrop`. Use 16ms debounce timer. Follow design doc \"Drag Handling\" section precisely. | Restrictions: MUST match Month View debouncing pattern exactly. MUST use 16ms timer. MUST flush on drop. | Success: Drag handlers work at 60fps, debouncing correct, edge cases handled, matches Month View architecture. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 20. Implement drag move calculations and validation\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Implement `_handleSameTypeMove(Offset localPosition)` - calculate new time from Y offset, apply snapping, validate\n  - Implement `_handleTimedToAllDayConversion(Offset localPosition)` - convert to all-day (midnight times)\n  - Implement `_handleAllDayToTimedConversion(Offset localPosition)` - convert to timed (calculate time from Y, use configured duration)\n  - Implement `_checkHorizontalEdgeProximity(double x)` - trigger day navigation when near edge\n  - Implement `_validateDrop()` - check user callback, blocked regions, date boundaries\n  - Implement snapping helpers: `_applySnapping()`, `_findNearbyEventBoundary()`\n  - All date arithmetic must be DST-safe (use `DateTime(y, m, d, h, m)`)\n  - Purpose: Calculate proposed dates during drag with validation\n  - _Leverage: Time utilities from Task 1, time region model from Task 12, Month View's validation pattern_\n  - _Requirements: FR-12 (Snap-to-time), FR-13 (Special time regions), FR-14 (Drag and drop), FR-15 (All-day ↔ Timed conversion), FR-17 (Cross-day navigation)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in gesture calculations | Task: Implement drag calculation methods in `lib/src/widgets/mcal_day_view.dart` following design doc \"Drag Handling\" section. Implement same-type move, type conversion, edge proximity, validation, snapping. Use DST-safe arithmetic. Use time utilities. Check blocked regions. | Restrictions: MUST use DST-safe arithmetic (DateTime constructor). MUST apply snapping. MUST validate against blocked regions. | Success: Drag calculations correct, snapping works, type conversion works, validation blocks invalid drops, edge navigation triggers. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 11: Drag and Drop - Preview Layers (Match Month View Architecture)\n\n- [ ] 21. Implement drop target preview and overlay layers\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Implement `_buildTimedEventsArea()` method returning Stack with DragTarget:\n    - Layer 1+2: Main content (gridlines + regions + events + current time)\n    - Layer 3: `_buildDropTargetPreviewLayer()` wrapped in ListenableBuilder + RepaintBoundary + IgnorePointer\n    - Layer 4: `_buildDropTargetOverlayLayer()` wrapped in ListenableBuilder + RepaintBoundary + IgnorePointer\n  - Implement `_buildDropTargetPreviewLayer(BuildContext)`:\n    - Shows phantom event tile at proposed position\n    - Uses `dropTargetTileBuilder` or default preview\n    - Only visible when drag handler has valid proposed range\n  - Implement `_buildDropTargetOverlayLayer(BuildContext)`:\n    - Highlights time slot range being targeted\n    - Uses `dropTargetOverlayBuilder` or default CustomPainter\n    - Semi-transparent colored overlay (blue if valid, red if invalid)\n  - Support `dropTargetTilesAboveOverlay` flag to swap Layer 3/4 order\n  - Add semantics at DragTarget level with drop target range announcement\n  - Purpose: Real-time drag feedback matching Month View architecture\n  - _Leverage: Month View's Stack architecture EXACTLY (~lines 5016-5024, 4672-4863)_\n  - _Requirements: FR-14 (Drag and drop), NFR-2 (Performance)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in complex UI rendering | Task: Implement `_buildTimedEventsArea` with 3-layer Stack in `lib/src/widgets/mcal_day_view.dart` EXACTLY matching Month View architecture (lines 5016-5024). Implement preview and overlay layers with ListenableBuilder wrappers. Follow design doc \"Stack Build Pattern\" section precisely. Support layer order toggle. Add semantics. | Restrictions: MUST match Month View Stack architecture exactly. MUST use ListenableBuilder. MUST use RepaintBoundary + IgnorePointer. | Success: Stack structure matches Month View, preview shows during drag, overlay highlights correctly, no performance issues. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 22. Make timed events draggable using MCalDraggableEventTile\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Wrap each timed event tile in `MCalDraggableEventTile` when `enableDragToMove: true`\n  - Pass `draggedTileBuilder` and `dragSourceTileBuilder` to wrapper\n  - Wire `onDragStarted`, `onDragEnd`, `onDragCanceled` callbacks to drag handler\n  - Pass event and source date to wrapper\n  - Purpose: Enable LongPressDraggable on timed events\n  - _Leverage: Existing `MCalDraggableEventTile` widget (~line 6544 in Month View), already supports time-based drag data_\n  - _Requirements: FR-14 (Drag and drop)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Wrap timed event tiles in `MCalDraggableEventTile` in `lib/src/widgets/mcal_day_view.dart` when drag enabled. Use existing widget from Month View. Pass builders and callbacks. Follow Month View pattern for wrapping event tiles. | Restrictions: Reuse existing `MCalDraggableEventTile` widget. Do NOT create new wrapper. | Success: Timed events are draggable with long-press, feedback tile follows cursor, source tile shows drag state. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 23. Make all-day events draggable\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Wrap all-day event tiles in `MCalDraggableEventTile` when `enableDragToMove: true`\n  - Same pattern as Task 22 but for all-day section\n  - Purpose: Enable drag from/to all-day section\n  - _Leverage: Same `MCalDraggableEventTile` widget_\n  - _Requirements: FR-14 (Drag and drop), FR-15 (All-day ↔ Timed conversion)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Wrap all-day event tiles in `MCalDraggableEventTile` in `lib/src/widgets/mcal_day_view.dart` when drag enabled. Same pattern as timed events. | Restrictions: Reuse existing widget. | Success: All-day events draggable, can drag between all-day and timed sections, type conversion works. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 12: Drag to Resize\n\n- [ ] 24. Add resize gesture tracking in parent Listener\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Wrap entire Day View content in `Listener` (outside DragTarget Stack)\n  - Implement `_handleResizePointerMoveFromParent(PointerMoveEvent)`\n  - Implement `_handleResizePointerUpFromParent(PointerUpEvent)`\n  - Implement `_handleResizePointerCancelFromParent(PointerCancelEvent)`\n  - Track resize state that survives scroll and navigation\n  - Purpose: Pointer tracking for resize gestures outside Stack\n  - _Leverage: Month View's Listener pattern EXACTLY (~lines 1689-1703)_\n  - _Requirements: FR-14 (Drag and drop - resize)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in gesture handling | Task: Add Listener wrapper around Day View content in `lib/src/widgets/mcal_day_view.dart` EXACTLY matching Month View pattern (lines 1689-1703). Implement pointer handlers for resize tracking. Place outside DragTarget Stack so it survives scroll/navigation. Follow design doc \"Resize Gesture Tracking\" section. | Restrictions: MUST match Month View Listener structure. MUST wrap entire content. Listener OUTSIDE Stack. | Success: Listener wraps content, pointer handlers present, resize tracking survives scroll. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 25. Implement resize handles on timed event tiles\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Create `_ResizeHandle` private widget (similar to Month View but vertical)\n  - Position handles at top and bottom edges of timed event tiles\n  - Use `GestureDetector` with `onVerticalDragStart/Update/End/Cancel`\n  - Visual: subtle horizontal line/grip that appears on hover\n  - Cursor: `SystemMouseCursors.resizeRow` on hover-capable platforms\n  - Only show on non-all-day events when `enableDragToResize` resolves to true\n  - Semantic labels: \"Resize start time\" / \"Resize end time\"\n  - Purpose: Interactive resize affordance on event edges\n  - _Leverage: Month View's `_ResizeHandle` pattern (~line 4600), but adapted for vertical (time-based) resize_\n  - _Requirements: FR-14 (Drag and drop - resize)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in gesture UI | Task: Create `_ResizeHandle` widget and integrate into timed event tiles in `lib/src/widgets/mcal_day_view.dart`. Model after Month View's horizontal resize handle (line 4600) but adapt for vertical time-based resize. Add top/bottom handles to timed events. Use vertical drag gestures. Add cursor and semantic labels. | Restrictions: Adapt Month View pattern, do NOT duplicate code. Vertical gestures only. Platform-aware cursor. | Success: Handles render on timed event edges, cursor changes on hover, gestures wire up, semantic labels present. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 26. Implement resize interaction logic\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Wire resize handle callbacks to drag handler:\n    - `onResizeStart`: call `dragHandler.startResize(event, edge)`\n    - `onResizeUpdate(dy)`: accumulate dy, calculate time delta, compute proposed start/end, call validation callback, update drag handler with preview\n    - `onResizeEnd`: call `_handleResizeEnd()` (similar to `_handleDrop`)\n    - `onResizeCancel`: call `dragHandler.cancelResize()`\n  - Implement `_handleResizeEnd()` method:\n    - Get final times from `dragHandler.completeResize()`\n    - Build `MCalEventResizedDetails`\n    - Call `onEventResized` callback\n    - Update controller (for recurring: `modifyOccurrence`)\n  - Enforce minimum duration (e.g., 15 minutes based on time slot granularity)\n  - Apply snapping during resize\n  - No cross-day edge navigation during resize (clamp to day boundaries)\n  - Purpose: Complete resize interaction with validation and event mutation\n  - _Leverage: Month View's resize completion pattern (~line 2550), Task 20's validation helpers_\n  - _Requirements: FR-12 (Snap-to-time), FR-14 (Drag and drop - resize)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in gesture calculations | Task: Implement resize interaction logic in `lib/src/widgets/mcal_day_view.dart` following design doc. Wire resize handles to drag handler. Implement time delta calculation (DST-safe), validation, snapping, preview updates, completion. Implement `_handleResizeEnd()` mirroring Month View's pattern. Apply minimum duration. | Restrictions: MUST use DST-safe arithmetic. MUST apply snapping. MUST enforce minimum duration. No cross-day resize. | Success: Resize works end-to-end: drag edge → preview shows → release → event updates with new times. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 13: Scrolling and Auto-Scroll\n\n- [ ] 27. Implement vertical scrolling with auto-scroll to current time\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Wrap timed events Stack in `SingleChildScrollView`\n  - Support external `scrollController` or create internal one\n  - Implement `_autoScrollToCurrentTime()` method:\n    - Calculate scroll position using `timeToOffset(DateTime.now())`\n    - Center current time in viewport\n    - Only execute once on initial load (use `_autoScrollDone` flag)\n    - Configurable via `autoScrollToCurrentTime` parameter\n  - Call auto-scroll in `didChangeDependencies` after first frame\n  - Purpose: Navigate to current time for immediate context\n  - _Leverage: ScrollController, `timeToOffset` from Task 1_\n  - _Requirements: FR-7 (Vertical scrolling)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in scroll behavior | Task: Add vertical scrolling to timed events area in `lib/src/widgets/mcal_day_view.dart`. Wrap in SingleChildScrollView. Implement `_autoScrollToCurrentTime()` that scrolls to current time on first load. Support external or internal controller. Use `timeToOffset` for calculation. Only execute once. | Restrictions: Only auto-scroll once. Must support external controller. Must center current time in viewport. | Success: Vertical scrolling works, auto-scrolls to current time on load (if enabled), respects external controller. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 14: Empty Time Slot Gestures\n\n- [ ] 28. Implement empty time slot tap and long-press handlers\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Wrap timed events Stack with `GestureDetector`\n  - Implement `_handleTimeSlotTap(Offset localPosition)` - convert position to DateTime, call `onTimeSlotTap` callback\n  - Implement `_handleTimeSlotLongPress(Offset localPosition)` - convert position to DateTime, call `onTimeSlotLongPress` callback\n  - Implement `_didTapHitEvent(Offset position)` - check if tap hit an event (event tap takes precedence)\n  - Use `offsetToTime` utility to convert position to DateTime\n  - Build `MCalTimeSlotContext` with date, time, offset, and `isAllDayArea: false`\n  - Purpose: Enable event creation gestures on empty time slots\n  - _Leverage: Month View's empty cell gesture pattern, `offsetToTime` from Task 1_\n  - _Requirements: FR-19 (Empty space tap/long press handlers)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in gesture handling | Task: Add GestureDetector around timed events Stack in `lib/src/widgets/mcal_day_view.dart` following design doc Component 8a. Implement tap and long-press handlers that convert position to DateTime using `offsetToTime`. Check if tap hit event first. Build context object. Call user callbacks. | Restrictions: Event taps must take precedence over empty slot taps. Must use `offsetToTime` utility. | Success: Empty time slot taps work, long press works, event taps still work (precedence), callbacks receive correct time. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 29. Implement all-day section tap and long-press handlers\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Add GestureDetector around all-day section\n  - Implement similar tap/long-press handlers for all-day area\n  - Build `MCalTimeSlotContext` with `isAllDayArea: true`\n  - Purpose: Enable all-day event creation gestures\n  - _Leverage: Task 28 pattern_\n  - _Requirements: FR-19 (Empty space tap/long press handlers)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Add tap/long-press handlers to all-day section in `lib/src/widgets/mcal_day_view.dart`. Same pattern as Task 28. Check if tap hit event. Build context with `isAllDayArea: true`. Call callbacks. | Restrictions: Event taps must take precedence. | Success: All-day section taps work, callbacks receive correct context with isAllDayArea flag. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 15: Keyboard Navigation\n\n- [ ] 30. Implement keyboard event focus and navigation\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Wrap entire Day View in `Focus` widget with `FocusNode`\n  - Implement `_handleKeyEvent(KeyEvent)` method\n  - Arrow Up/Down: Navigate between events vertically (chronologically)\n  - Tab/Shift+Tab: Navigate between events (forward/backward)\n  - Enter/Space: Activate focused event (call `onEventTap`)\n  - Escape: Clear focus or cancel keyboard operation\n  - Track `_focusedEvent` and `_focusedEventIndex` in state\n  - Add visual focus indicator (border/outline) on focused event\n  - Purpose: Keyboard alternative to mouse/touch for event navigation\n  - _Leverage: Month View's keyboard navigation pattern (~line 1442), Flutter's Focus widget_\n  - _Requirements: FR-11 (Keyboard navigation), NFR-6 (Accessibility)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in accessibility | Task: Add keyboard navigation to Day View in `lib/src/widgets/mcal_day_view.dart` following design doc. Wrap in Focus widget. Implement `_handleKeyEvent` for arrow/tab/enter/escape keys. Navigate between events chronologically. Add visual focus indicator. Track focused event state. | Restrictions: Must wrap entire widget in Focus. Must handle all specified keys. Focus indicator must be visible. | Success: Arrow keys navigate events, Tab cycles forward, Shift+Tab backward, Enter activates, Escape clears, focus indicator visible. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 31. Implement keyboard event moving (reusing drag infrastructure)\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Add keyboard move mode state: `_isKeyboardMoveMode`, `_keyboardMoveEvent`, `_keyboardMoveOriginalStart`, `_keyboardMoveOriginalEnd`\n  - When focused event + Ctrl+M (or similar): enter move mode\n  - Arrow Up/Down: Move event up/down by time slot increments\n  - Arrow Left/Right: Move event to previous/next day\n  - Enter: Confirm move (reuse `_handleDrop` flow)\n  - Escape: Cancel move\n  - Reuse `MCalDragHandler.startDrag/updateDrag/completeDrag` for state and preview\n  - Announce each step via `SemanticsService`\n  - Purpose: Keyboard alternative to drag-and-drop\n  - _Leverage: Month View's keyboard move pattern (~line 1442-2237), drag handler from Phase 9_\n  - _Requirements: FR-11 (Keyboard navigation), FR-14 (Drag and drop), NFR-6 (Accessibility)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in accessibility | Task: Implement keyboard event moving in `lib/src/widgets/mcal_day_view.dart` following design doc Component 7 and Month View pattern. Add move mode state. Arrow keys move event in time or across days. Reuse drag handler for preview. Enter confirms via `_handleDrop`. Escape cancels. Add screen reader announcements. | Restrictions: MUST reuse existing drag handler and `_handleDrop`. Do NOT duplicate drop logic. MUST announce each step. | Success: Keyboard move works: select event → enter move mode → arrow keys → preview shows → Enter confirms → event moves. Announcements at each step. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 32. Implement keyboard event resizing\n  - File: `lib/src/widgets/mcal_day_view.dart`\n  - Add keyboard resize mode state: `_isKeyboardResizeMode`, `_keyboardResizeEdge`\n  - When focused event + Ctrl+R: enter resize mode, choose edge (start vs end)\n  - Arrow Up: Decrease time (move start later or end earlier)\n  - Arrow Down: Increase time (move start earlier or end later)\n  - Tab: Switch between start and end edge\n  - Enter: Confirm resize (reuse `_handleResizeEnd` flow)\n  - Escape: Cancel resize\n  - Reuse `MCalDragHandler.startResize/updateResize/completeResize`\n  - Announce each step via `SemanticsService`\n  - Purpose: Keyboard alternative to edge-drag resize\n  - _Leverage: Month View's keyboard resize pattern, drag handler resize state from Phase 12_\n  - _Requirements: FR-11 (Keyboard navigation), FR-14 (Drag and drop - resize), NFR-6 (Accessibility)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in accessibility | Task: Implement keyboard event resizing in `lib/src/widgets/mcal_day_view.dart`. Add resize mode state. Arrow Up/Down adjust times. Tab switches edge. Reuse drag handler resize methods. Enter confirms via `_handleResizeEnd`. Escape cancels. Add announcements. | Restrictions: MUST reuse existing drag handler and `_handleResizeEnd`. MUST announce each step. | Success: Keyboard resize works: select event → enter resize mode → arrow keys → preview shows → Enter confirms → event resizes. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 16: Testing - Unit Tests\n\n- [ ] 33. Write unit tests for time utilities\n  - File: `test/utils/time_utils_test.dart`\n  - Test `timeToOffset` with various times (start hour, end hour, middle, midnight edge cases)\n  - Test `offsetToTime` with various offsets and time slot durations\n  - Test `durationToHeight` conversion\n  - Test `snapToTimeSlot` with different granularities (1, 5, 10, 15, 20, 30, 60 min)\n  - Test `snapToNearbyTime` and `isWithinSnapRange`\n  - Test DST transitions (verify no Duration-based arithmetic errors)\n  - Purpose: Ensure core time↔pixel conversions are accurate\n  - _Leverage: Existing test patterns in `test/` directory_\n  - _Requirements: All time-related functional requirements, NFR-2 (Performance), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer specializing in unit testing | Task: Create comprehensive unit tests for time utilities in `test/utils/time_utils_test.dart`. Test all functions from Task 1 with various inputs, edge cases, DST transitions. Use existing test patterns. Aim for 100% coverage. | Restrictions: Test all edge cases. Test DST safety. Isolate tests. | Success: All time utility functions tested, 100% coverage, DST tests pass, all tests green. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 34. Write unit tests for overlap detection algorithm\n  - File: `test/widgets/mcal_day_view_overlap_test.dart`\n  - Test with 0 events, 1 event, 2 overlapping events, 3+ concurrent events\n  - Test nested overlaps (A contains B, B overlaps C)\n  - Test events at day boundaries (midnight, 23:59)\n  - Test column assignment is optimal (no unnecessary columns)\n  - Test with various time slot durations\n  - Purpose: Ensure overlap detection works for all patterns\n  - _Leverage: Existing widget test patterns_\n  - _Requirements: FR-9 (Event overlap layout), NFR-2 (Performance), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer specializing in algorithm testing | Task: Create unit tests for overlap detection in `test/widgets/mcal_day_view_overlap_test.dart`. Test all overlap patterns (0, 1, 2, 3+ concurrent, nested). Test edge cases (boundaries, various durations). Verify column assignments optimal. | Restrictions: Test all overlap patterns. Verify optimality. | Success: Overlap detection tested comprehensively, all patterns work, edge cases covered, tests green. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 35. Write unit tests for MCalTimeRegion model\n  - File: `test/models/mcal_time_region_test.dart`\n  - Test `contains` method with various times\n  - Test `overlaps` method with various time ranges\n  - Test recurring regions (daily, weekly patterns)\n  - Test region filtering for specific dates\n  - Purpose: Ensure time region model works correctly\n  - _Leverage: Existing model test patterns_\n  - _Requirements: FR-13 (Special time regions), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer | Task: Create unit tests for `MCalTimeRegion` in `test/models/mcal_time_region_test.dart`. Test contains/overlaps methods. Test recurring regions. Test filtering. Edge cases. | Restrictions: Test recurring patterns thoroughly. | Success: MCalTimeRegion fully tested, recurring regions work, all tests green. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 17: Testing - Widget Tests\n\n- [ ] 36. Write widget tests for MCalDayView basic rendering\n  - File: `test/widgets/mcal_day_view_test.dart`\n  - Test widget creation with minimal parameters\n  - Test day header rendering\n  - Test time legend rendering\n  - Test gridlines rendering with various intervals\n  - Test current time indicator rendering\n  - Test navigator rendering\n  - Test theme application\n  - Test RTL layout\n  - Purpose: Ensure core widget renders correctly\n  - _Leverage: Existing widget test patterns in `test/widgets/`_\n  - _Requirements: All basic structure requirements (FR-1 to FR-8), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer specializing in Flutter widget testing | Task: Create widget tests for Day View basic rendering in `test/widgets/mcal_day_view_test.dart`. Test creation, header, legend, gridlines, indicator, navigator, theme, RTL. Use existing widget test patterns. | Restrictions: Test rendering, not interaction yet. | Success: Basic rendering tests pass, all components render correctly, theme applies, RTL works. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 37. Write widget tests for event rendering\n  - File: `test/widgets/mcal_day_view_events_test.dart`\n  - Test all-day event rendering\n  - Test timed event rendering with correct positioning\n  - Test overlapping events render side-by-side\n  - Test event minimum height enforcement\n  - Test event tile builders (custom builders)\n  - Test overflow indicator in all-day section\n  - Purpose: Ensure events render at correct positions\n  - _Leverage: Existing event rendering test patterns_\n  - _Requirements: FR-1 (Basic structure), FR-9 (Event overlap layout), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer | Task: Create widget tests for event rendering in `test/widgets/mcal_day_view_events_test.dart`. Test all-day events, timed events, overlaps, positioning, min height, custom builders, overflow. | Restrictions: Use pump and settle. Verify positions. | Success: Event rendering tests pass, positions correct, overlaps work, custom builders applied. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 38. Write widget tests for special time regions\n  - File: `test/widgets/mcal_day_view_regions_test.dart`\n  - Test region rendering at correct positions\n  - Test recurring regions expand correctly for display date\n  - Test blocked regions use correct styling\n  - Test custom region builder\n  - Test regions render below events layer\n  - Purpose: Ensure time regions work as expected\n  - _Leverage: Existing widget test patterns_\n  - _Requirements: FR-13 (Special time regions), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer | Task: Create widget tests for special time regions in `test/widgets/mcal_day_view_regions_test.dart`. Test rendering, recurring expansion, blocked styling, custom builder, layer order. | Restrictions: Test recurring regions thoroughly. | Success: Region tests pass, recurring works, styling correct, custom builder applied. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 39. Write widget tests for drag and drop\n  - File: `test/widgets/mcal_day_view_drag_test.dart`\n  - Test drag-to-move within day (timed to timed)\n  - Test drag across days (horizontal edge detection)\n  - Test timed → all-day conversion\n  - Test all-day → timed conversion\n  - Test drag validation (onDragWillAccept callback)\n  - Test blocked region prevents drop\n  - Test drag preview layers render during drag\n  - Test drag callbacks fire correctly\n  - Purpose: Ensure drag-and-drop works end-to-end\n  - _Leverage: Month View's drag test patterns, `WidgetTester` gestures_\n  - _Requirements: FR-14 (Drag and drop), FR-15 (All-day ↔ Timed conversion), FR-17 (Cross-day navigation), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer specializing in gesture testing | Task: Create drag and drop tests in `test/widgets/mcal_day_view_drag_test.dart`. Test drag within day, across days, type conversion, validation, blocked regions, preview layers, callbacks. Use existing drag test patterns. | Restrictions: Test all drag scenarios. Mock callbacks. | Success: All drag scenarios tested, type conversion works, validation blocks invalid drops, callbacks fire, tests green. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 40. Write widget tests for drag-to-resize\n  - File: `test/widgets/mcal_day_view_resize_test.dart`\n  - Test resize start time (drag top edge down/up)\n  - Test resize end time (drag bottom edge down/up)\n  - Test minimum duration enforcement\n  - Test snapping during resize\n  - Test resize validation callback\n  - Test resize preview shows during resize\n  - Test resize callbacks fire correctly\n  - Purpose: Ensure resize works correctly\n  - _Leverage: Month View's resize test patterns_\n  - _Requirements: FR-14 (Drag and drop - resize), FR-12 (Snap-to-time), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer | Task: Create resize tests in `test/widgets/mcal_day_view_resize_test.dart`. Test start/end edge resize, minimum duration, snapping, validation, preview, callbacks. Use existing resize test patterns. | Restrictions: Test both edges. Test minimum duration. | Success: All resize scenarios tested, minimum enforced, snapping works, callbacks fire, tests green. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 41. Write widget tests for keyboard navigation\n  - File: `test/widgets/mcal_day_view_keyboard_test.dart`\n  - Test arrow key event navigation\n  - Test Tab/Shift+Tab cycling\n  - Test Enter/Space activation\n  - Test Escape clears focus\n  - Test keyboard move mode (arrow keys → preview → Enter confirms)\n  - Test keyboard resize mode\n  - Test screen reader announcements (verify SemanticsService calls)\n  - Purpose: Ensure keyboard accessibility works\n  - _Leverage: Month View's keyboard test patterns_\n  - _Requirements: FR-11 (Keyboard navigation), NFR-6 (Accessibility), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer specializing in accessibility testing | Task: Create keyboard navigation tests in `test/widgets/mcal_day_view_keyboard_test.dart`. Test all keyboard operations (arrow, tab, enter, escape), move mode, resize mode, announcements. Use existing keyboard test patterns. | Restrictions: Test all keys. Mock SemanticsService. | Success: All keyboard operations tested, move/resize modes work, announcements verified, tests green. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 42. Write widget tests for snapping functionality\n  - File: `test/widgets/mcal_day_view_snapping_test.dart`\n  - Test snap to time slots during drag\n  - Test snap to other events (magnetic snapping)\n  - Test snap to current time indicator\n  - Test snap range configuration\n  - Test snapping can be disabled per type\n  - Purpose: Ensure snapping works correctly\n  - _Leverage: Snap utilities from Task 1_\n  - _Requirements: FR-12 (Snap-to-time), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer | Task: Create snapping tests in `test/widgets/mcal_day_view_snapping_test.dart`. Test snap to time slots, other events, current time. Test snap range. Test disabling. | Restrictions: Test all snap types. | Success: All snapping scenarios tested, snapping works within range, can be disabled, tests green. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 18: Example App Integration\n\n- [ ] 43. Update example app main screen with view selector\n  - File: `example/lib/screens/main_screen.dart`\n  - Add NavigationRail with two destinations: Month View, Day View\n  - Update state to track selected view\n  - Update body to show selected view\n  - Maintain existing Month View functionality\n  - Purpose: Allow users to switch between Month and Day views\n  - _Leverage: Existing NavigationRail in example app_\n  - _Requirements: Example app requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Update example app main screen in `example/lib/screens/main_screen.dart` to add Day View option to NavigationRail. Add state for selected view. Show Month or Day view based on selection. Maintain existing functionality. | Restrictions: Do NOT break existing Month View. | Success: NavigationRail shows both views, can switch between Month and Day, existing functionality preserved. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 44. Create Day View showcase structure\n  - File: `example/lib/views/day_view/day_view_showcase.dart`\n  - Create `DayViewShowcase` StatefulWidget\n  - Add TabBar with style tabs (Default, Modern, Classic, Minimal, Colorful, Features Demo)\n  - Structure mirrors Month View showcase\n  - Purpose: Showcase framework for Day View styles\n  - _Leverage: Month View showcase structure in `example/lib/views/month_view/month_view_showcase.dart`_\n  - _Requirements: Example app requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Create Day View showcase structure in `example/lib/views/day_view/day_view_showcase.dart`. Mirror Month View showcase structure. Add TabBar with 6 style tabs. Create scaffold for style widgets. | Restrictions: Mirror Month View structure exactly. | Success: Showcase renders with TabBar, 6 tabs, structure matches Month View. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 45. Create Default style example for Day View\n  - File: `example/lib/views/day_view/styles/default_style.dart`\n  - Implement Default style: clean, neutral theme with default builders\n  - Show basic Day View functionality\n  - Add sample events (meetings, appointments)\n  - Purpose: Baseline example showing out-of-box experience\n  - _Leverage: Month View's default style in `example/lib/views/month_view/styles/default_style.dart`_\n  - _Requirements: Example app requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Create Default style for Day View in `example/lib/views/day_view/styles/default_style.dart`. Clean neutral theme, default builders, sample events. Mirror Month View's default style approach. | Restrictions: Use default builders. Clean design. | Success: Default style renders cleanly, shows basic functionality, matches Month View quality. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 46. Create Modern style example for Day View\n  - File: `example/lib/views/day_view/styles/modern_style.dart`\n  - Implement Modern style: Material 3 design, vibrant colors, rounded corners, shadows\n  - Custom event tile builders with modern aesthetics\n  - Purpose: Showcase modern design possibilities\n  - _Leverage: Month View's modern style_\n  - _Requirements: Example app requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer with design sensibility | Task: Create Modern style in `example/lib/views/day_view/styles/modern_style.dart`. Material 3 design, vibrant colors, rounded corners, custom builders. Mirror Month View's modern style quality. | Restrictions: Must use Material 3 design language. | Success: Modern style looks polished, Material 3 aesthetics, custom builders enhance appearance. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 47. Create Classic style example for Day View\n  - File: `example/lib/views/day_view/styles/classic_style.dart`\n  - Implement Classic style: traditional calendar look, grid emphasis, serif fonts\n  - Custom gridline and header builders\n  - Purpose: Showcase traditional calendar aesthetics\n  - _Leverage: Month View's classic style_\n  - _Requirements: Example app requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Create Classic style in `example/lib/views/day_view/styles/classic_style.dart`. Traditional calendar look, grid emphasis, serif fonts, custom builders. Mirror Month View's classic style approach. | Restrictions: Traditional aesthetics. | Success: Classic style looks like traditional paper calendar, grid emphasis, serif fonts. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 48. Create Minimal style example for Day View\n  - File: `example/lib/views/day_view/styles/minimal_style.dart`\n  - Implement Minimal style: clean, spacious, subtle colors, reduced visual noise\n  - Hide optional elements (week number, some gridlines)\n  - Purpose: Showcase minimalist design\n  - _Leverage: Month View's minimal style_\n  - _Requirements: Example app requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Create Minimal style in `example/lib/views/day_view/styles/minimal_style.dart`. Clean, spacious, subtle colors, hide optional elements. Mirror Month View's minimal approach. | Restrictions: Minimize visual elements. Spacious. | Success: Minimal style looks clean and spacious, reduced visual noise, elegant. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 49. Create Colorful style example for Day View\n  - File: `example/lib/views/day_view/styles/colorful_style.dart`\n  - Implement Colorful style: vibrant event colors, color-coded categories, playful\n  - Custom color mapping for different event types\n  - Purpose: Showcase color customization\n  - _Leverage: Month View's colorful style_\n  - _Requirements: Example app requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer | Task: Create Colorful style in `example/lib/views/day_view/styles/colorful_style.dart`. Vibrant colors, color-coded categories, custom color mapping. Mirror Month View's colorful approach. | Restrictions: Vibrant colors required. | Success: Colorful style is vibrant and playful, color-coded categories, visually appealing. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 50. Create Features Demo style example for Day View\n  - File: `example/lib/views/day_view/styles/features_demo_style.dart`\n  - Implement Features Demo: showcase ALL Day View features\n  - Special time regions (lunch break, non-working hours)\n  - Blocked time slots (no meetings zones)\n  - Custom builders for all components\n  - Snap-to-time demonstrations\n  - Week number display\n  - All drag/drop scenarios (timed↔timed, timed↔all-day, cross-day)\n  - Keyboard navigation hints\n  - Purpose: Comprehensive feature showcase for developers\n  - _Leverage: Month View's features demo style in `example/lib/views/month_view/styles/features_demo_style.dart`_\n  - _Requirements: Example app requirements, ALL functional requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Senior Flutter Developer | Task: Create Features Demo style in `example/lib/views/day_view/styles/features_demo_style.dart`. Showcase ALL Day View features: special regions, blocked slots, snapping, week number, drag scenarios, keyboard nav. Mirror Month View's comprehensive features demo. Add code comments explaining each feature. | Restrictions: MUST demonstrate all features. Add explanatory comments. | Success: Features Demo showcases every Day View feature, well-commented, serves as developer reference. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 19: Documentation and Polish\n\n- [ ] 51. Write comprehensive API documentation\n  - File: `lib/src/widgets/mcal_day_view.dart` (update dartdoc)\n  - Add detailed class-level dartdoc for `MCalDayView`\n  - Document every parameter with examples\n  - Add usage examples in dartdoc\n  - Document builder callback signatures and when they're called\n  - Document callback details objects\n  - Add \"See also\" references to related classes\n  - Purpose: Complete API documentation\n  - _Leverage: Month View's documentation style_\n  - _Requirements: All functional requirements, NFR-7 (Documentation)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Technical Writer with Flutter expertise | Task: Write comprehensive dartdoc for `MCalDayView` in `lib/src/widgets/mcal_day_view.dart`. Document class, every parameter, all callbacks, all builders. Add usage examples. Follow Month View's documentation style and quality. | Restrictions: Must document every public API element. Add examples. | Success: API documentation is comprehensive, every parameter documented with examples, matches Month View quality. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 52. Create Day View README section\n  - File: `README.md` (add Day View section)\n  - Add Day View overview with screenshot\n  - List key features\n  - Provide quick start code example\n  - Link to API documentation\n  - Purpose: User-facing documentation\n  - _Leverage: Existing Month View README section_\n  - _Requirements: NFR-7 (Documentation)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Technical Writer | Task: Add Day View section to README.md. Include overview, screenshot (from example app), feature list, quick start example, API docs link. Match Month View README quality. | Restrictions: Must include screenshot. Code example must compile. | Success: Day View README section complete, screenshot included, example compiles, links work. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 53. Create Day View migration guide\n  - File: `docs/day_view_migration.md` (new)\n  - Document how to migrate from third-party day view widgets\n  - Provide parameter mapping tables\n  - Include common patterns and examples\n  - Purpose: Help developers adopt Day View\n  - _Leverage: Month View as reference for patterns_\n  - _Requirements: NFR-7 (Documentation)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Technical Writer | Task: Create Day View migration guide in `docs/day_view_migration.md`. Document migration from common third-party widgets (table_calendar, syncfusion_flutter_calendar, etc.). Provide parameter mapping, pattern examples. | Restrictions: Must include concrete examples. | Success: Migration guide is helpful, parameter mappings clear, examples work. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 54. Run dart analyze and fix all issues\n  - Files: All Day View implementation files\n  - Run `dart analyze` on project\n  - Fix all errors, warnings, and lints\n  - Ensure code follows project style guide\n  - Purpose: Clean, maintainable code\n  - _Requirements: NFR-1 (Code quality), NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Code Quality Engineer | Task: Run `dart analyze` on entire project. Fix all errors, warnings, and lint issues in Day View code. Ensure code follows project conventions and style guide. | Restrictions: Zero warnings/errors allowed. | Success: `dart analyze` shows zero issues, code clean and consistent. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 55. Run dart format on all Day View files\n  - Files: All Day View implementation files\n  - Run `dart format` on all Day View files\n  - Verify consistent formatting\n  - Purpose: Consistent code style\n  - _Requirements: NFR-1 (Code quality)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Developer | Task: Run `dart format .` on project to format all Day View files. Verify formatting applied consistently. | Restrictions: Use standard dart format. | Success: All files formatted consistently, no manual formatting needed. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 56. Run all tests and ensure 100% pass rate\n  - Files: All test files\n  - Run `flutter test` on entire test suite\n  - Fix any failing tests\n  - Ensure Day View tests pass\n  - Ensure existing Month View tests still pass (no regressions)\n  - Purpose: Verify implementation correctness\n  - _Requirements: All functional requirements, NFR-3 (Reliability)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer | Task: Run complete test suite with `flutter test`. Fix any failing tests. Ensure all Day View tests pass. Ensure no Month View regressions. Verify 100% pass rate. | Restrictions: All tests must pass. No regressions. | Success: `flutter test` shows 100% pass rate, no regressions, all Day View functionality verified. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 57. Performance testing and optimization\n  - Test Day View rendering with 100+ events\n  - Measure frame times during scroll (target: 60fps)\n  - Measure frame times during drag (target: 60fps with debouncing)\n  - Profile memory usage with large event sets\n  - Optimize any bottlenecks found\n  - Purpose: Ensure performance meets requirements\n  - _Leverage: Flutter DevTools for profiling_\n  - _Requirements: NFR-2 (Performance)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Performance Engineer | Task: Profile Day View performance with Flutter DevTools. Test with 100+ events. Measure scroll fps, drag fps, memory usage. Optimize bottlenecks. Target: 60fps scroll/drag, `<100MB` memory for 100 events. Document findings. | Restrictions: Must measure objectively. Target 60fps. | Success: Day View maintains 60fps with 100+ events, memory usage reasonable, optimizations documented. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 58. Accessibility audit\n  - Test with screen reader (TalkBack on Android, VoiceOver on iOS)\n  - Verify all interactive elements are accessible\n  - Verify semantic labels are descriptive\n  - Test keyboard navigation completely\n  - Test with high contrast mode\n  - Test with large text sizes\n  - Purpose: Ensure accessibility compliance\n  - _Requirements: NFR-6 (Accessibility)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Accessibility Specialist | Task: Perform comprehensive accessibility audit on Day View. Test with screen readers on Android/iOS. Test keyboard navigation. Test high contrast, large text. Verify WCAG 2.1 AA compliance. Document issues and fix. | Restrictions: Must test on real devices. WCAG AA compliance required. | Success: Day View is fully accessible, screen reader works, keyboard nav complete, WCAG AA compliant. Mark task as [-], log implementation, mark as [x]._\n\n## Phase 20: Final Integration and Release Prep\n\n- [ ] 59. Update CHANGELOG.md\n  - File: `CHANGELOG.md`\n  - Add new version section with Day View feature\n  - Document all new APIs\n  - Document breaking changes (if any)\n  - Purpose: Release notes for users\n  - _Requirements: NFR-7 (Documentation)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Developer | Task: Update CHANGELOG.md with new version section. Document Day View feature, all new APIs (MCalDayView, context classes, detail classes, MCalTimeRegion). Document breaking changes. Follow existing CHANGELOG format. | Restrictions: Follow semantic versioning. Complete API list. | Success: CHANGELOG updated, new APIs documented, follows format, ready for release. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 60. Update pubspec.yaml version\n  - File: `pubspec.yaml`\n  - Bump version number (major/minor/patch based on breaking changes)\n  - Update description if needed\n  - Verify dependencies are up to date\n  - Purpose: Prepare for package release\n  - _Requirements: Release requirements_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Developer | Task: Update version in pubspec.yaml following semantic versioning. Bump major if breaking changes, minor if new features (Day View), patch if only fixes. Update description. Verify dependencies current. | Restrictions: Follow semantic versioning. | Success: Version bumped correctly, description updated, dependencies current. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 61. Final code review and cleanup\n  - Review all Day View code for consistency\n  - Remove any debug prints or commented code\n  - Verify all TODOs resolved\n  - Ensure naming conventions consistent\n  - Verify file organization matches project structure\n  - Purpose: Code quality and maintainability\n  - _Requirements: NFR-1 (Code quality)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Senior Developer | Task: Perform final code review of all Day View implementation. Remove debug code, resolve TODOs, check naming consistency, verify file organization. Ensure code quality matches Month View standards. | Restrictions: No debug code. No unresolved TODOs. | Success: Code is clean, consistent, well-organized, ready for production. Mark task as [-], log implementation, mark as [x]._\n\n- [ ] 62. Create release notes and announcement\n  - File: `docs/day_view_release.md` (new)\n  - Write user-facing release announcement\n  - Highlight key features with screenshots\n  - Include migration guide links\n  - Include example app links\n  - Purpose: Announce Day View release\n  - _Requirements: NFR-7 (Documentation)_\n  - _Prompt: Implement the task for spec day-view, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Technical Writer/Product Manager | Task: Create Day View release notes in `docs/day_view_release.md`. Write engaging user-facing announcement. Highlight features with screenshots from example app. Include links to docs, examples, migration guide. Draft pub.dev announcement text. | Restrictions: Must include screenshots. Engaging copy. | Success: Release notes complete, screenshots included, links work, ready for announcement. Mark task as [-], log implementation, mark as [x]._\n\n## Task Completion Workflow\n\nFor each task:\n1. Mark as `[-]` in tasks.md BEFORE starting implementation\n2. Read the design doc section(s) referenced in the task\n3. Review any _Leverage_ files/patterns mentioned\n4. Implement following the _Prompt_ guidance\n5. Test implementation against _Success_ criteria\n6. Log implementation using log-implementation tool (include artifacts: APIs, components, functions, classes, integrations)\n7. Mark as `[x]` in tasks.md AFTER completion\n\n## Progress Tracking\n\n- **Phase 1 (Foundation)**: Tasks 1-3 (3 tasks)\n- **Phase 2 (Core Widget)**: Tasks 4-6 (3 tasks)\n- **Phase 3 (Navigation/Header)**: Tasks 7-8 (2 tasks)\n- **Phase 4 (Time Legend/Gridlines)**: Tasks 9-10 (2 tasks)\n- **Phase 5 (Current Time)**: Task 11 (1 task)\n- **Phase 6 (Time Regions)**: Tasks 12-13 (2 tasks)\n- **Phase 7 (All-Day Events)**: Task 14 (1 task)\n- **Phase 8 (Timed Events)**: Tasks 15-16 (2 tasks)\n- **Phase 9 (Drag State)**: Tasks 17-18 (2 tasks)\n- **Phase 10 (Drag Handlers)**: Tasks 19-20 (2 tasks)\n- **Phase 11 (Drag Previews)**: Tasks 21-23 (3 tasks)\n- **Phase 12 (Resize)**: Tasks 24-26 (3 tasks)\n- **Phase 13 (Scrolling)**: Task 27 (1 task)\n- **Phase 14 (Empty Gestures)**: Tasks 28-29 (2 tasks)\n- **Phase 15 (Keyboard)**: Tasks 30-32 (3 tasks)\n- **Phase 16 (Unit Tests)**: Tasks 33-35 (3 tasks)\n- **Phase 17 (Widget Tests)**: Tasks 36-42 (7 tasks)\n- **Phase 18 (Example App)**: Tasks 43-50 (8 tasks)\n- **Phase 19 (Documentation)**: Tasks 51-58 (8 tasks)\n- **Phase 20 (Release)**: Tasks 59-62 (4 tasks)\n\n**Total: 62 tasks across 20 phases**\n",
  "fileStats": {
    "size": 84512,
    "lines": 872,
    "lastModified": "2026-02-14T07:25:09.557Z"
  },
  "comments": []
}