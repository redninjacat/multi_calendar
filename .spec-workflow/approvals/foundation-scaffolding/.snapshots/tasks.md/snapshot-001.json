{
  "id": "snapshot_1769792023789_j1a9lp1mk",
  "approvalId": "approval_1769792023786_ds21fcwp2",
  "approvalTitle": "Foundation Scaffolding Tasks - Multi Calendar Package",
  "version": 1,
  "timestamp": "2026-01-30T16:53:43.789Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Tasks Document\n\n- [ ] 1. Update package configuration in pubspec.yaml\n  - File: pubspec.yaml\n  - Add required dependencies: intl (^0.19.0), flutter_localizations SDK\n  - Configure flutter section for localization code generation (if using ARB)\n  - Purpose: Establish proper package dependencies for localization and core functionality\n  - _Leverage: Existing pubspec.yaml structure_\n  - _Requirements: 1.1, 1.2, 8.4_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Package Developer specializing in pubspec.yaml configuration | Task: Update pubspec.yaml to add intl package (^0.19.0) and flutter_localizations SDK dependency following requirements 1.1, 1.2, and 8.4. Configure flutter section for ARB file code generation if applicable. Maintain existing structure and add new dependencies correctly. | Restrictions: Do not remove existing dependencies, follow Flutter pubspec.yaml format exactly, ensure version constraints are compatible | Success: pubspec.yaml includes all required dependencies, flutter pub get succeeds without errors, dependencies resolve correctly_\n\n- [ ] 2. Create directory structure\n  - Files: Create all required directories\n  - Create lib/src/models/, lib/src/controllers/, lib/src/utils/, lib/src/widgets/, lib/l10n/\n  - Create test/models/, test/controllers/, test/utils/ directories\n  - Purpose: Establish proper project organization matching structure steering document\n  - _Leverage: Structure steering document directory organization_\n  - _Requirements: 2.1, 2.2_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: DevOps Engineer specializing in project structure and organization | Task: Create complete directory structure following requirements 2.1 and 2.2, matching the structure steering document. Create all required directories: lib/src/models/, lib/src/controllers/, lib/src/utils/, lib/src/widgets/, lib/l10n/, and corresponding test directories. | Restrictions: Follow exact directory names from structure steering doc, maintain Flutter package conventions, ensure all parent directories exist | Success: All directories are created in correct locations, structure matches steering document exactly, directories are ready for file creation_\n\n- [ ] 3. Implement CalendarEvent model\n  - File: lib/src/models/calendar_event.dart\n  - Create CalendarEvent class with all required fields: id, title, start, end, comment, externalId, occurrenceId\n  - Add constructor, toString, ==, and hashCode overrides\n  - Add dartdoc comments for all public members\n  - Purpose: Provide core data model for calendar events\n  - _Leverage: Design document CalendarEvent specification, Dart DateTime class_\n  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Dart Developer specializing in data models and immutable classes | Task: Create CalendarEvent class following requirements 4.1-4.6 and design document specification. Implement immutable class with required fields (id, title, start, end) and optional fields (comment, externalId, occurrenceId). Add const constructor, toString override, == operator, and hashCode override. Include comprehensive dartdoc comments. | Restrictions: Use DateTime for start and end (no Duration field), make optional fields nullable (String?), ensure immutability with final fields, follow Dart style guide | Success: CalendarEvent class compiles without errors, all fields are correctly typed, equality and hashCode work correctly, dartdoc comments are complete_\n\n- [ ] 4. Create CalendarEvent unit tests\n  - File: test/models/calendar_event_test.dart\n  - Write tests for constructor, equality, hashCode, toString\n  - Test with all fields, optional fields null, optional fields provided\n  - Purpose: Ensure CalendarEvent model reliability and correctness\n  - _Leverage: flutter_test framework, CalendarEvent model_\n  - _Requirements: 4.7_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer specializing in unit testing and Flutter test framework | Task: Create comprehensive unit tests for CalendarEvent model covering requirement 4.7. Test constructor with all combinations of required and optional fields, test equality operator with identical and different instances, test hashCode consistency, test toString output. Cover edge cases like null optional fields. | Restrictions: Use flutter_test framework, test both success and edge cases, maintain test isolation, follow Flutter testing conventions | Success: All CalendarEvent tests pass, good test coverage achieved, edge cases are covered, tests are maintainable and clear_\n\n- [ ] 5. Implement EventController skeleton\n  - File: lib/src/controllers/event_controller.dart\n  - Create EventController class extending ChangeNotifier\n  - Add placeholder methods: loadEvents, getVisibleDateRange, setVisibleDateRange\n  - Methods should throw UnimplementedError with clear messages\n  - Add dartdoc comments\n  - Purpose: Provide controller skeleton for future event management implementation\n  - _Leverage: Flutter ChangeNotifier, Design document EventController specification_\n  - _Requirements: 5.1, 5.2, 5.3, 5.4_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in state management and controllers | Task: Create EventController class extending ChangeNotifier following requirements 5.1-5.4 and design document. Implement placeholder methods loadEvents(DateTime start, DateTime end) returning Future<List<CalendarEvent>>, getVisibleDateRange() returning DateTimeRange?, and setVisibleDateRange(DateTimeRange range). Methods should throw UnimplementedError with descriptive messages. Add private _visibleDateRange field. Include dartdoc comments. | Restrictions: Extend ChangeNotifier correctly, use proper return types, throw UnimplementedError (not NotImplementedException), follow Flutter controller patterns | Success: EventController compiles without errors, extends ChangeNotifier correctly, placeholder methods have correct signatures, UnimplementedError messages are clear_\n\n- [ ] 6. Create EventController unit tests\n  - File: test/controllers/event_controller_test.dart\n  - Write tests for constructor, placeholder methods throwing UnimplementedError\n  - Test ChangeNotifier integration\n  - Purpose: Ensure EventController structure is correct and testable\n  - _Leverage: flutter_test framework, EventController class_\n  - _Requirements: 5.5_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer specializing in controller testing and Flutter test framework | Task: Create unit tests for EventController covering requirement 5.5. Test that constructor creates instance successfully, test that placeholder methods throw UnimplementedError when called, test that ChangeNotifier can be instantiated and listeners can be added. Verify method signatures are correct. | Restrictions: Use flutter_test framework, test error throwing correctly, maintain test isolation, verify ChangeNotifier functionality | Success: All EventController tests pass, UnimplementedError is thrown correctly, ChangeNotifier integration works, tests verify structure correctness_\n\n- [ ] 7. Create localization ARB files\n  - Files: lib/l10n/app_en.arb, lib/l10n/app_es_MX.arb\n  - Create English ARB file with day names, month names, common calendar terms\n  - Create Mexican Spanish ARB file with translations\n  - Include @@locale metadata\n  - Purpose: Provide localization strings for English and Mexican Spanish\n  - _Leverage: Flutter ARB file format, intl package standards_\n  - _Requirements: 8.2, 8.3_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Localization Specialist with expertise in Flutter ARB files and i18n | Task: Create ARB files for English (app_en.arb) and Mexican Spanish (app_es_MX.arb) following requirements 8.2 and 8.3. Include @@locale metadata, day names (Sunday-Saturday), month names (January-December), and common calendar terms (Today, Week, Month, Day, etc.). Use proper ARB file format with keys and values. | Restrictions: Follow Flutter ARB file format exactly, use proper locale codes (en, es_MX), ensure all keys match between files, include proper metadata | Success: ARB files are valid Flutter format, all required strings are included, translations are accurate, files can be processed by flutter gen-l10n_\n\n- [ ] 8. Implement localization utility class\n  - File: lib/src/utils/localization.dart\n  - Create CalendarLocalizations class (or similar name)\n  - Implement methods: getLocalizedString, formatDate, formatTime, isRTL, getSupportedLocales\n  - Add default locale fallback (English)\n  - Integrate with intl package and ARB files\n  - Purpose: Provide localization utilities for calendar strings and date formatting\n  - _Leverage: intl package, flutter_localizations, ARB files_\n  - _Requirements: 8.1, 8.5, 8.6_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in localization and internationalization | Task: Create CalendarLocalizations utility class following requirements 8.1, 8.5, and 8.6. Implement methods to get localized strings from ARB files, format dates and times according to locale using intl package, detect RTL languages, and get list of supported locales. Add fallback to English for unsupported locales. Integrate with flutter_localizations and ARB files. | Restrictions: Use intl package DateFormat, handle missing keys gracefully, ensure proper locale fallback, follow Flutter localization patterns | Success: Localization utility compiles without errors, methods work correctly for English and Spanish, date formatting uses proper locale, fallback to English works for unsupported locales_\n\n- [ ] 9. Create localization utility unit tests\n  - File: test/utils/localization_test.dart\n  - Write tests for getLocalizedString, formatDate, formatTime, isRTL, getSupportedLocales\n  - Test English and Spanish locales, unsupported locale fallback\n  - Purpose: Ensure localization utility works correctly for all supported locales\n  - _Leverage: flutter_test framework, localization utility, ARB files_\n  - _Requirements: 8.8_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer specializing in localization testing | Task: Create comprehensive unit tests for localization utility covering requirement 8.8. Test getLocalizedString for English and Spanish, test formatDate and formatTime with different locales, test isRTL detection, test getSupportedLocales returns correct list, test fallback to English for unsupported locale. Verify all methods handle edge cases. | Restrictions: Use flutter_test framework, test with actual ARB file data, verify locale-specific formatting, test fallback behavior | Success: All localization tests pass, English and Spanish work correctly, date/time formatting is locale-appropriate, fallback to English works, RTL detection is accurate_\n\n- [ ] 10. Update main export file\n  - File: lib/multi_calendar.dart\n  - Export CalendarEvent model\n  - Export EventController\n  - Add package-level dartdoc comments\n  - Document future exports (views, styles) as comments\n  - Purpose: Establish public API boundary for the package\n  - _Leverage: Existing multi_calendar.dart file, Design document export specification_\n  - _Requirements: 3.1, 3.2, 3.3, 3.4_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Package Developer specializing in API design and exports | Task: Update multi_calendar.dart export file following requirements 3.1-3.4 and design document. Export CalendarEvent and EventController. Add comprehensive package-level dartdoc comments explaining the package purpose and usage. Document future exports (view widgets, style classes) as comments. Ensure all exports compile correctly. | Restrictions: Only export public APIs, maintain clean export structure, use proper dartdoc format, do not export internal implementation details | Success: Export file compiles without errors, CalendarEvent and EventController are exported correctly, dartdoc comments are complete, future exports are documented_\n\n- [ ] 11. Update example app pubspec.yaml\n  - File: example/pubspec.yaml\n  - Add multi_calendar path dependency\n  - Add flutter_localizations SDK dependency\n  - Add intl package dependency\n  - Configure localization delegates\n  - Purpose: Configure example app to use the package and localization\n  - _Leverage: Existing example/pubspec.yaml, package pubspec.yaml_\n  - _Requirements: 6.2_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in example app configuration | Task: Update example/pubspec.yaml following requirement 6.2. Add multi_calendar as path dependency (path: ../), add flutter_localizations SDK dependency, add intl package dependency. Configure flutter section with localization delegates if needed. Ensure example app can import and use the package. | Restrictions: Use correct path dependency syntax, include all required dependencies, follow Flutter example app conventions, ensure dependencies match package requirements | Success: Example pubspec.yaml includes all dependencies, flutter pub get succeeds, example app can import multi_calendar package_\n\n- [ ] 12. Update example app main.dart\n  - File: example/lib/main.dart\n  - Create Material app demonstrating package usage\n  - Import multi_calendar package\n  - Create EventController instance\n  - Create CalendarEvent instances\n  - Demonstrate localization usage with language switching\n  - Purpose: Provide working example demonstrating package integration\n  - _Leverage: Flutter Material app structure, CalendarEvent, EventController, localization utility_\n  - _Requirements: 6.1, 6.3, 6.4, 6.5, 8.7_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Developer specializing in example applications and Material Design | Task: Update example/lib/main.dart following requirements 6.1, 6.3-6.5, and 8.7. Create Material app that imports multi_calendar package, creates EventController instance, creates CalendarEvent instances, and demonstrates localization with language switching between English and Spanish. Show basic usage patterns even if using placeholder widgets. | Restrictions: Use Material Design, demonstrate all key package features, include language switching UI, handle localization delegates properly, ensure app launches without errors | Success: Example app compiles and runs, demonstrates package usage clearly, language switching works, app is user-friendly and informative_\n\n- [ ] 13. Create optional placeholder widget\n  - File: lib/src/widgets/placeholder_widget.dart\n  - Create simple StatelessWidget displaying package name\n  - Use CalendarEvent and EventController to demonstrate integration\n  - Add dartdoc comments\n  - Purpose: Provide simple widget to verify package structure works end-to-end\n  - _Leverage: Flutter widgets, CalendarEvent, EventController_\n  - _Requirements: 7.1, 7.2, 7.3, 7.4_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Flutter Widget Developer specializing in reusable components | Task: Create optional PlaceholderWidget following requirements 7.1-7.4. Create simple StatelessWidget that displays package name or basic text. Optionally use CalendarEvent and EventController to demonstrate integration. Add dartdoc comments. Keep widget simple but functional. | Restrictions: Use Flutter widget best practices, keep widget simple, ensure it compiles, follow widget naming conventions | Success: PlaceholderWidget compiles without errors, displays content correctly, demonstrates package integration, can be used in example app_\n\n- [ ] 14. Run flutter analyze and fix any issues\n  - Files: All project files\n  - Run flutter analyze on entire package\n  - Fix any linting or analysis errors\n  - Ensure code follows flutter_lints rules\n  - Purpose: Ensure code quality and compliance with Flutter standards\n  - _Leverage: flutter_lints, analysis_options.yaml_\n  - _Requirements: 1.5_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Code Quality Engineer specializing in Flutter static analysis | Task: Run flutter analyze on entire package following requirement 1.5. Fix any linting errors, warnings, or analysis issues. Ensure all code follows flutter_lints rules and analysis_options.yaml configuration. Address all code quality issues. | Restrictions: Fix all errors and warnings, maintain code functionality, follow Flutter style guide, ensure no regressions | Success: flutter analyze passes with no errors or warnings, all code follows linting rules, code quality standards are met_\n\n- [ ] 15. Verify example app runs successfully\n  - Files: example app files\n  - Run example app on simulator/emulator\n  - Verify app launches without crashes\n  - Verify package imports work\n  - Verify localization switching works\n  - Purpose: End-to-end verification that foundation is complete and working\n  - _Leverage: Flutter run command, example app, package_\n  - _Requirements: 6.4, 8.7_\n  - _Prompt: Implement the task for spec foundation-scaffolding, first run spec-workflow-guide to get the workflow guide then implement the task: Role: QA Engineer specializing in Flutter app testing and verification | Task: Verify example app runs successfully following requirements 6.4 and 8.7. Run example app on simulator or emulator, verify app launches without crashes, verify package imports work correctly, verify localization language switching functions properly. Document any issues found. | Restrictions: Test on actual device or emulator, verify all functionality works, check for runtime errors, ensure user experience is smooth | Success: Example app launches successfully, no crashes occur, package integration works, localization switching functions correctly, foundation is complete and verified_\n",
  "fileStats": {
    "size": 19053,
    "lines": 154,
    "lastModified": "2026-01-30T16:53:39.416Z"
  },
  "comments": []
}