{
  "id": "snapshot_1769788330204_9fbo6kmvx",
  "approvalId": "approval_1769659925602_sc1xy53rd",
  "approvalTitle": "Tech Steering Document - Multi Calendar Package",
  "version": 2,
  "timestamp": "2026-01-30T15:52:10.204Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Technology Stack\n\n## Project Type\n\nFlutter package/library for displaying calendar views with event support. Published to pub.dev for use in Flutter applications.\n\n## Core Technologies\n\n### Primary Language(s)\n\n* **Language**: Dart `3.10.4+`\n* **Runtime**: Flutter SDK\n* **Language-specific tools**: pub (package manager), dart analyzer, flutter\\_lints\n\n### Key Dependencies/Libraries\n\n* **flutter**: SDK dependency (`>=1.17.0`)\n* **flutter\\_test**: Testing framework (SDK)\n* **flutter\\_lints**: Code quality and linting (`^6.0.0`)\n* **RRULE library** (TBD): For RFC 5545 RRULE parsing and generation - need to evaluate Dart packages:\n  * `recurrence` package\n  * `rrule` package\n  * Custom implementation if needed\n* **Date/Time handling**: Dart's built-in `DateTime` class, `intl` package for localization and formatting\n* **Localization**: `intl` package for i18n support, date/time formatting, and RTL\n* **Accessibility**: Flutter's built-in `Semantics` widgets and accessibility APIs\n\n### Application Architecture\n\n**Widget-based Architecture**: Flutter widget tree with controller pattern for state management\n\n* **Views**: Separate widget classes for each view type (DayView, MultiDayView, MonthView)\n* **Controller**: EventController manages event loading and view state\n* **Models**: Event data models that interface with external systems\n* **Delegation Pattern**: Event storage/management delegated to external classes via callbacks/events\n* **Builder Pattern**: Extensive use of builder callbacks for customization\n* **Responsive Design**: Mobile-first approach with adaptive layouts for larger screens\n* **Accessibility Layer**: Semantics widgets and accessibility APIs throughout\n* **Internationalization**: i18n support via intl package, RTL layout support\n\n### Data Storage (if applicable)\n\n* **Package Storage**: None - package does not persist events\n* **External Storage**: Delegated to consuming application\n* **Data formats**:\n  * RRULE strings stored as-is (RFC 5545 format)\n  * Event data models use Dart classes\n  * Date/Time: Dart `DateTime` objects\n\n### External Integrations (if applicable)\n\n* **Event Sources**: Via EventController callbacks - any backend can provide events\n* **Protocols**: None directly - consuming app handles API calls\n* **Authentication**: None - handled by consuming application\n\n## Development Environment\n\n### Build & Development Tools\n\n* **Build System**: Flutter build system (`flutter build`)\n* **Package Management**: pub (via `pubspec.yaml`)\n* **Development workflow**: Hot reload via Flutter, watch mode for tests\n\n### Code Quality Tools\n\n* **Static Analysis**: dart analyzer, flutter\\_lints\n* **Formatting**: `dart format` (built-in)\n* **Testing Framework**: flutter\\_test for widget and unit tests\n* **Documentation**: dartdoc for API documentation\n\n### Version Control & Collaboration\n\n* **VCS**: Git\n* **Branching Strategy**: Standard Git Flow or feature branches\n* **Code Review Process**: GitHub PR reviews\n\n## Deployment & Distribution\n\n* **Target Platform(s)**: All Flutter-supported platforms (iOS, Android, Web, Desktop)\n* **Distribution Method**: pub.dev package repository\n* **Installation Requirements**: Flutter SDK, Dart `3.10.4+`\n* **Update Mechanism**: Standard pub.dev versioning and `flutter pub upgrade`\n\n## Technical Requirements & Constraints\n\n### Performance Requirements\n\n* **Rendering**: Smooth scrolling at `60fps` on mid-range mobile devices\n* **Event Loading**: Load events for visible date range only (controller pattern)\n* **Memory**: Efficient handling of large event sets (`1000+` events) on mobile devices\n* **RRULE Processing**: Efficient recurrence expansion for visible date ranges\n* **Startup Time**: Views should render within `100ms` of widget build on mobile\n* **Touch Responsiveness**: Gesture recognition (drag, resize) should feel responsive (`<50ms` feedback)\n* **Mobile Optimization**: Prioritize mobile performance; desktop should scale efficiently\n\n### Compatibility Requirements\n\n* **Platform Support**: iOS `12+`, Android API `21+`, Web, macOS, Windows, Linux\n* **Dependency Versions**:\n  * Flutter: `>=1.17.0`\n  * Dart SDK: `^3.10.4`\n  * intl: `^0.19.0` (for localization)\n* **Standards Compliance**:\n  * RFC 5545 RRULE specification compliance\n  * WCAG accessibility guidelines (where applicable)\n  * Platform-specific accessibility standards (iOS VoiceOver, Android TalkBack)\n\n### Security & Compliance\n\n* **Security Requirements**: No sensitive data stored by package; consuming app responsible\n* **Compliance Standards**: None specific to package (delegated to consuming app)\n* **Threat Model**: Package is display-only; security concerns in consuming application\n\n### Scalability & Reliability\n\n* **Expected Load**: Support calendars with `1000+` events efficiently\n* **Availability Requirements**: Package reliability depends on Flutter framework\n* **Growth Projections**: Support for additional views and features over time\n\n## Technical Decisions & Rationale\n\n### Decision Log\n\n1. **Separate Widgets per View**: Unlike the popular single widget approach, each view (Day, Multi-day, Month) is its own widget\n   * **Rationale**: Better modularity, allows selective use, easier customization\n   * **Trade-off**: More files to maintain, but clearer separation of concerns\n2. **Event Controller Pattern**: Single controller manages events for all views\n   * **Rationale**: Consistent API, efficient loading, single source of truth\n   * **Trade-off**: Controller must handle different view requirements\n3. **Delegation for Storage**: Package does not handle event persistence\n   * **Rationale**: Maximum flexibility, no lock-in to specific storage solutions\n   * **Trade-off**: Consuming apps must implement storage layer\n4. **RRULE String Storage**: Store RRULE strings in RFC 5545 compliant format, compatible with standard rrule Dart libraries\n   * **Rationale**: RFC 5545 is the industry standard for calendar recurrence rules; compatibility with existing rrule Dart packages ensures interoperability\n   * **Trade-off**: Must ensure exact RFC 5545 string format compliance and compatibility with chosen rrule library\n5. **Builder Callbacks for Customization**: Extensive use of builder callbacks\n   * **Rationale**: Maximum flexibility without requiring package forks\n   * **Trade-off**: More complex API surface, but necessary for customization needs\n6. **Duration vs End Time**: Support both start/end DateTime and start DateTime + Duration\n   * **Rationale**: Different use cases prefer different models\n   * **Trade-off**: Internal model must handle both, but provides flexibility\n7. **Optional Built-in Navigators**: Each view can optionally display a navigator\n   * **Rationale**: Convenience for common use cases while maintaining customization via builders\n   * **Trade-off**: More UI code in package, but provides good defaults with customization options\n8. **Mobile-First Design**: Optimize for mobile devices first\n   * **Rationale**: Most calendar usage is on mobile; ensure excellent mobile experience\n   * **Trade-off**: May require additional work for desktop optimization, but ensures mobile quality\n9. **Comprehensive Localization**: Full i18n support from the start\n   * **Rationale**: Calendar apps are used globally; localization is essential\n   * **Trade-off**: More complex code, but necessary for international adoption\n10. **Accessibility First**: Screen reader support built-in\n    * **Rationale**: Calendar is a critical UI component; must be accessible to all users\n    * **Trade-off**: Additional semantic widgets and testing, but essential for inclusive design\n\n## Known Limitations\n\n* **Time Zone Support**: Not in initial release (future enhancement)\n* **Regions/Holidays**: Explicitly out of scope - will not be implemented\n* **Event Editors**: Out of scope - external responsibility (though resize/edit gestures supported)\n* **Event Detail Views**: Out of scope - external responsibility\n* **RRULE Library Dependency**: Need to evaluate and potentially contribute to Dart RRULE libraries if none meet requirements\n* **Hover Events**: Only available on platforms that support hover (desktop/web), not on mobile\n\n## Flutter-Specific Considerations\n\n### Widget Lifecycle\n\n* Views must efficiently rebuild only when necessary\n* EventController should use ValueNotifier or similar for reactive updates\n* Consider using `const` constructors where possible for performance\n\n### State Management\n\n* Controller pattern for view state (current date, visible range)\n* Event loading via callbacks/streams\n* Consider Provider/Riverpod integration examples in documentation\n\n### Rendering Performance\n\n* Use `ListView.builder` or `CustomScrollView` for efficient scrolling\n* Implement viewport-based event loading\n* Consider `RepaintBoundary` widgets for complex event tiles\n* **Mobile Optimization**: Minimize widget rebuilds, use `const` constructors where possible\n* **Lazy Loading**: Load events and render cells only when visible\n* **Gesture Performance**: Optimize drag-and-drop and resize gesture handling for smooth 60fps\n\n### Platform Considerations\n\n* **Mobile-First**: Optimize touch interactions, gesture recognition, and performance for mobile\n* **Desktop/Web**: Support hover events, mouse interactions, keyboard navigation\n* **Cross-Platform Gestures**: Handle drag-and-drop, resize gestures consistently across platforms\n* **Screen Sizes**: Responsive design from small mobile (`320px`) to large desktop (`4K`)\n* **Orientations**: Support portrait and landscape on mobile\n* **RTL Support**: Proper layout direction handling for RTL languages\n* **Accessibility**: Platform-specific accessibility APIs (iOS VoiceOver, Android TalkBack, Web ARIA)",
  "fileStats": {
    "size": 9694,
    "lines": 195,
    "lastModified": "2026-01-30T04:23:54.453Z"
  },
  "comments": []
}